angular.module("vgraph",[]),angular.module("vgraph").factory("DomHelper",[function(){"use strict";function a(a){var c=b[a];return c||(c=new RegExp("(?:^|\\s)"+a+"(?!\\S)"),b[a]=c),c}var b={};return{addClass:function(b,c){var d,e,f,g,h=a(c);for(d=0,e=b.length;e>d;d++)f=b[d].$element,g=f.getAttribute("class")||"",g.match(h)||f.setAttribute("class",g+" "+c)},removeClass:function(b,c){var d,e,f,g=a(c);for(d=0,e=b.length;e>d;d++)f=b[d].$element,f.setAttribute("class",(f.getAttribute("class")||"").replace(g,""))}}}]),angular.module("vgraph").factory("Hitbox",[function(){"use strict";function a(a,b,c,d,e){var f,g,h,i,j,k=[],l=[],m=[];for(this.xMin=a,this.xDiff=b-a,this.yMin=c,this.yDiff=d-c,this.count=e,f=0,g=e;g>f;f++)for(j=[],k.push(j),l.push([]),m.push([]),h=0,i=e;i>h;h++)j.push([]);this._index=k,this._xDex=l,this._yDex=m}function b(a,b,c,d){var e,f,g,h=[];for(e=0,f=a.length;f>e;e++)g=a[e],d(g)(b,c)&&h.push(g);return h}var c=0;a.prototype.$hashX=function(a){return(a-this.xMin)/this.xDiff*this.count|0},a.prototype.$hashY=function(a){return(a-this.yMin)/this.yDiff*this.count|0},a.prototype.add=function(a){var b,d,e,f,g,h,i=this._index;for(a.x1>a.x2&&(g=a.x1,a.x1=a.x2,a.x2=g),a.y1>a.y2&&(g=a.y1,a.y1=a.y2,a.y2=g),a.$uid=c++,b=this.$hashX(a.x1),d=this.$hashX(a.x2)+1,g=this.$hashY(a.y1),f=this.$hashY(a.y2)+1,e=g;f>e;e++)this._yDex[e].push(a);for(;d>b;b++)for(h=i[b],this._xDex[b].push(a),e=g;f>e;e++)h[e].push(a)};var d={intersect:function(a,b){return this.x1<=a&&this.x2>=a&&this.y1<=b&&this.y2>=b},intersectX:function(a){return this.x1<=a&&this.x2>=a},intersectY:function(a,b){return this.y1<=b&&this.y2>=b}};return a.prototype.checkHit=function(a,c){return b(this._index[this.$hashX(a)][this.$hashY(c)],a,c,function(a){return(a.intersect?a.intersect:d.intersect).bind(a)})},a.prototype.checkX=function(a){return b(this._xDex[this.$hashX(a)],a,null,function(a){return(a.intersectX?a.intersectX:d.intersectX).bind(a)})},a.prototype.checkY=function(a){return b(this._yDex[this.$hashY(a)],null,a,function(a){return(a.intersectY?a.intersectY:d.intersectY).bind(a)})},a}]),angular.module("vgraph").factory("Scheduler",[function(){"use strict";function a(){this.$scripts={},this.$master=this.schedule=[]}function b(){return+new Date}return a.prototype.startScript=function(a){a?this.$scripts[a]?(this.schedule=this.$scripts[a],this.schedule.length=0):this.schedule=this.$scripts[a]=[]:this.schedule=[]},a.prototype.endScript=function(a,b,c){this.schedule.push({$end:!0,always:a,success:b,failure:c}),this.$master.push(this.schedule),this.schedule=this.$master},a.prototype.loop=function(a,b,c){this.schedule.push({start:0,stop:a.length,data:a,op:b,ctx:c})},a.prototype.func=function(a,b){this.schedule.push({op:a,ctx:b})},a.prototype.run=function(){var a=this;this.$lock||(this.$lock=!0,setTimeout(function(){a.$eval()},5))},a.prototype.$eval=function(){function a(){f.$eval()}var c,d,e,f=this,g=!0,h=b(),i=h+500;try{for(;(e=this.schedule.shift())&&g;){if(e.length)for(;e.length;)this.schedule.unshift(e.pop());else if("start"in e)for(c=e.start,d=e.stop;d>c;c++)e.op.call(e.ctx,e.data[c],c);else e.$end?(e.success&&e.success(),e.always&&e.always()):e.op.call(e.ctx);b()>i&&(g=!1,setTimeout(a,5))}}catch(j){for(console.log(j),g=!0;(e=this.schedule.shift())&&g;)e.$end&&(e.failure&&e.failure(),e.always&&e.always(),a())}this.schedule.length||(this.$lock=!1)},a}]),angular.module("vgraph").factory("ComponentBox",[function(){"use strict";function a(a,b){var d=b.padding,e=a.padding,f=b.margin,g=a.margin;g||(a.margin=g={top:0,right:0,bottom:0,left:0}),f&&(g.top=c(f.top,g.top),g.right=c(f.right,g.right),g.bottom=c(f.bottom,g.bottom),g.left=c(f.left,g.left)),e||(a.padding=e={top:0,right:0,bottom:0,left:0}),d&&(e.top=c(d.top,e.top),e.right=c(d.right,e.right),e.bottom=c(d.bottom,e.bottom),e.left=c(d.left,e.left)),a.outerWidth=c(b.outerWidth,a.outerWidth)||0,a.outerHeight=c(b.outerHeight,a.outerHeight)||0,a.top=g.top,a.bottom=a.outerHeight-g.bottom,a.left=g.left,a.right=a.outerWidth-g.right,a.center=(a.left+a.right)/2,a.middle=(a.top+a.bottom)/2,a.width=a.right-a.left,a.height=a.bottom-a.top,a.innerTop=a.top+e.top,a.innerBottom=a.bottom-e.bottom,a.innerLeft=a.left+e.left,a.innerRight=a.right-e.right,a.innerWidth=a.innerRight-a.innerLeft,a.innerHeight=a.innerBottom-a.innerTop,a.ratio=a.outerWidth+" x "+a.outerHeight}function b(b){this.registrations=[],a(this,b||{})}function c(a,b){return void 0!==a?parseInt(a):b}return b.prototype.register=function(a){this.registrations.push(a)},b.prototype.targetSvg=function(a){this.$element=jQuery(a),this.resize()},b.prototype.resize=function(){var b,c,d=this.$element;if(d.attr("width",null).attr("height",null),d[0].style.cssText=null,a(this,{outerWidth:d.outerWidth(!0),outerHeight:d.outerHeight(!0),margin:{top:d.css("margin-top"),right:d.css("margin-right"),bottom:d.css("margin-bottom"),left:d.css("margin-left")},padding:{top:d.css("padding-top"),right:d.css("padding-right"),bottom:d.css("padding-bottom"),left:d.css("padding-left")}}),d.css("margin","0").css("padding","0").attr("width",this.outerWidth).attr("height",this.outerHeight).css({width:this.outerWidth+"px",height:this.outerHeight+"px"}),this.innerWidth&&this.innerHeight)for(b=0,c=this.registrations.length;c>b;b++)this.registrations[b]()},b}]),angular.module("vgraph").factory("ComponentChart",["$timeout","ComponentView","ComponentBox","DataCollection","LinearSampler","makeEventing","Scheduler","Hitbox","DomHelper",function(a,b,c,d,e,f,g,h,i){"use strict";function j(){var a=this;this.$vguid=++n,this.box=new c,this.views={},this.models=[],this.waiting={},this.references={},this.loading=!0,this.message=null,this.$on("focus",function(b){b?a.highlightOn(b):a.highlightOff()})}function k(a){var b,c;a.forEach(function(a){var d=a.viewport;(void 0===b||b>d.minValue)&&(b=d.minValue),(void 0===c||c<d.maxValue)&&(c=d.maxValue)}),a.forEach(function(a){a.setViewportValues(b,c)})}function l(a){var b,c;a.forEach(function(a){var d=a.viewport;(void 0===b||b>d.minInterval)&&(b=d.minInterval),(void 0===c||c<d.maxInterval)&&(c=d.maxInterval)}),a.forEach(function(a){a.setViewportIntervals(b,c)})}var m=new g,n=1;return f(j.prototype),j.defaultView="default",j.defaultModel="linear",j.prototype.setPage=function(a){this.page=a},j.prototype.configure=function(a,b){var c,d,f=this.addView.bind(this);b||(b={}),b.x||(b.x={}),b.y||(b.y={}),this.page=a,this.settings=b,this.normalizeY=b.normalizeY,this.normalizeX=b.normalizeX,d=b.views,d?angular.isFunction(d)&&(d=d()):(c={},c[j.defaultModel]=new e(function(a){return Math.round(a._$interval)},b.nodeFactory),d={},d[j.defaultView]={models:c}),angular.forEach(d,f)},j.prototype.setInputReference=function(a,b){this.references[a]=b},j.prototype.render=function(){var a,b=this,c=[],d=!1,e=0;try{angular.forEach(this.views,function(b,c){a=c,b.parse()}),a=null,angular.forEach(this.views,function(b,e){a=e,b.hasData()?(c.push(b),d=!0):b.isReady()&&(d=!0)}),a=null,this.normalizeY&&k(c),this.normalizeX&&l(c)}catch(f){console.log("parsing error",a,f.stack)}e=c.length,this.loading=!d,m.startScript(this.$vguid),this.configureHitbox(),this.loading?(b.$trigger("loading"),m.func(function(){b.loading=!0,b.pristine=!1})):e?(m.func(function(){b.message=null}),m.loop(c,function(a){a.build()}),m.loop(c,function(a){a.process()}),m.loop(c,function(a){a.finalize()}),m.func(function(){b.loading=!1,b.pristine=!0})):(b.$trigger("error"),m.func(function(){b.message="No Data Available",b.pristine=!1})),m.endScript(function(){b.$trigger("done")},function(){b.$trigger("success",c[0])},function(){b.pristine=!1,b.message="Unable to Render",b.$trigger("error")}),m.run()},j.prototype.scheduleRender=function(b){var c=this;this.nrTimeout||(this.nrTimeout=a(function(){c.render(c.waiting,b),c.waiting={},c.nrTimeout=null},30))},j.prototype.rerender=function(a){this.scheduleRender(a),this.waiting=this.views},j.prototype.needsRender=function(a,b){this.scheduleRender(b),this.waiting[a.name]||(this.waiting[a.name]=a)},j.prototype.getView=function(a){var c=this.views[a];return c||(c=new b,this.views[a]=c),c},j.prototype.addView=function(a,b){var c=this,d=this.settings,e=this.getView(b);e.configure(a,d,this.box),e.setPage(this.page),void 0!==d.x.min&&(e.pane.setBounds({min:d.x.min,max:d.x.max}),d.x.interval&&d.x.max&&d.datumFactory&&e.manager.data.$fillPoints(d.x.min,d.x.max,d.x.interval,d.datumFactory)),void 0!==this.settings.x.minPane&&e.pane.setPane(this.settings.x.minPane,this.settings.x.maxPane),e.manager.register(function(){c.needsRender(e)}),e.manager.onError(function(a){c.error(a)})},j.prototype.error=function(a){a?(this.loading=!1,this.message=a):this.message=null,this.$trigger("error")},j.prototype.setPane=function(a,b){var c=this.views,d=Object.keys(this.views);this.settings.x.minPane=a,this.settings.x.maxPane=b,d.forEach(function(d){c[d].pane.setPane({start:a,stop:b})})},j.prototype.configureHitbox=function(){var a=this.box;this.hitbox=new h(a.left,a.right,a.top,a.bottom,10)},j.prototype.registerElement=function(a,b){a.$element=b,this.hitbox.add(a)},j.prototype.highlightElements=function(a,b){var c=this.hitbox.checkX(a),d=this.hitbox.checkY(b),e=this.hitbox.checkHit(a,b);this.unlightElements(),i.addClass(c,"highlight-vertical"),i.addClass(d,"highlight-horizontal"),i.addClass(e,"highlight"),this._activeElements={vertical:c,horizontal:d,intersections:e}},j.prototype.unlightElements=function(){var a=this._activeElements;a&&(i.removeClass(a.vertical,"highlight-vertical"),i.removeClass(a.horizontal,"highlight-horizontal"),i.removeClass(a.intersections,"highlight"))},j.prototype.highlightOn=function(a){var b=0,c=0,d={};angular.forEach(this.views,function(e,f){var g;d[f]=e.getPoint(a.x),g=d[f].$pos,void 0!==g&&(c++,b+=g)}),d.$pos=b/c,d.pos=a,this.$trigger("focus-point",d),this.$trigger("highlight",d),this.highlightElements(a.x,a.y)},j.prototype.highlightOff=function(){this.$trigger("highlight",null),this.unlightElements()},j}]),angular.module("vgraph").factory("ComponentElement",["StatCalculations",function(a){"use strict";function b(a){return(new DOMParser).parseFromString('<g xmlns="http://www.w3.org/2000/svg">'+a+"</g>","image/svg+xml").childNodes[0].childNodes}function c(a,b,c){var d,e=a.element;for(e.innerHTML="",d=c.length-1;-1!==d;d--)a.register(b[d],c[d]),e.appendChild(c[d])}function d(){this.children=null}return d.svgCompile=b,d.prototype.setElement=function(a){this.element=a},d.prototype.setDrawer=function(a){this.factory=a},d.prototype.setReferences=function(a){angular.isArray(a)||(a=[a]),this.references=a},d.prototype.parse=function(b){var c=0,d={},e=[];return this.references.forEach(function(a){var f;a&&(f=b[a.model],d[f.$modelUid]||(c++,d[f.$modelUid]=!0,e=e.concat(f.$getIndexs())),a.$model=f,a.$getNode=function(a){return this.$model.$getNode(a)},a.$getValue=function(a){var b=this.$getNode(a);return b?this.getValue(b):void 0})}),c>1&&(d={},e=e.filter(function(a){return d[a]?void 0:(d[a]=!0,a)})),this.keys=e,a.limits(e,this.references)},d.prototype.build=function(){var a=this.factory(),d=a.convert(this.keys);"g"===this.element.tagName?c(this,d,b(this.make(d,a.makeElement.bind(a)).join(""))):this.element.setAttribute("d",this.make(d,a.makePath.bind(a)).join(""))},d.prototype.register=function(){},d.prototype.make=function(a,b){var c,d,e,f=[];for(c=0,d=a.length;d>c;c++)e=b(a[c]),e&&f.push(e);return f},d}]),angular.module("vgraph").factory("ComponentGenerator",["$timeout","DrawBuilder","DrawLine","DrawFill","DrawBox","DrawIcon","ComponentChart",function(a,b,c,d,e,f,g){"use strict";function h(a){var b,c;return"object"!=typeof a?null:(b=a.value,c=a.interval,void 0===a.$uid&&(a.$uid=i++),a.field=a.name,a.view||(a.view=g.defaultView),a.model||(a.model=g.defaultModel),a.className||(a.className="node-"+a.name),void 0===a.getValue&&(a.getValue=function(b){return b[a.field]}),a)}var i=0,j=b.isNumeric;return{isNumeric:j,normalizeConfig:h,makeLineCalc:function(a,b){var d=new c;return d.preparse=function(a){var c=b.$getNode(a);return{x:c._$interval,y:b.getValue(c)}},function(){var c=a.views[b.view];return d.scale=function(a){return c.y.scale(a)},d}},makeBoxCalc:function(a,b,c){var d,f,g,h,i=new e(c);return i.preparse=function(a){var c=b.$getNode(a);return g(c)?h?(f=h(c),{x1:c._$interval,x2:c._$interval,y1:f,y2:f}):{x1:c._$interval,x2:c._$interval,y1:d.viewport.minValue,y2:d.viewport.maxValue}:void 0},function(){return d=a.getView(b.view),g=b.isValid,h=b.getValue,i.scale1=i.scale2=function(a){return d.y.scale(a)},i}},makeIconCalc:function(a,b,c,d){var e,g,h,i,j=new f(c,d);return j.preparse=function(a){var c=b.$getNode(a);return h(c)?i?(g=i(c),{x1:c._$interval,x2:c._$interval,y1:g,y2:g}):{x1:c._$interval,x2:c._$interval,y1:e.viewport.minValue,y2:e.viewport.maxValue}:void 0},function(){return e=a.getView(b.view),h=b.isValid,i=b.getValue,j.scale1=j.scale2=function(a){return e.y.scale(a)},j}},makeBarCalc:function(a,b,c,d){var f,g,h=new e,i=h.mergeSet;return h.preparse=function(a){var e,f,h,i,k,l,m=b.$getNode(a);return h=b.getValue(m),i=c?c.$getValue(a):g.viewport.minValue,l=d?parseInt(d,10)/2:3,j(h)&&j(i)&&h!==i&&(e=m._$interval-l,f=m._$interval+l,k={x1:e>m._$minInterval?e:m._$minInterval,x2:f>m._$maxInterval?m._$maxInterval:f,y1:h,y2:i}),k},h.mergeSet=function(a,b){return i.call(this,a,b),!0},function(){return f=a.views[b.view],g=c?a.views[c.view]:f,h.scale1=function(a){return f.y.scale(a)},h.scale2=function(a){return g.y.scale(a)},h}},makeFillCalc:function(a,b,c){var e,f,g=new d;return g.preparse=function(a){var d,g,h=b.$getNode(a);return d=b.getValue(h),g=f?c.$getValue(a):e.viewport.minValue,j(d)&&j(g)?{x:h._$interval,y1:d,y2:g}:void 0},function(){return e=a.views[b.view],g.scale1=function(a){return e.y.scale(a)},c?(f=a.views[c.view],g.scale2=function(a){return f.y.scale(a)}):g.scale2=g.scale1,g}}}}]),angular.module("vgraph").factory("ComponentPage",["DataFeed","DataLoader","DataManager",function(a,b,c){"use strict";function d(){this.$$pageUid=e++,this.feeds={},this.charts={},this.managers={},this.connections={}}var e=1;return d.defaultManager="default",d.prototype.configure=function(a){var b,c;if(angular.isArray(a))for(b=0,c=a.length;c>b;b++)this.addFeed(a[b]);else this.addFeed(a)},d.prototype.addFeed=function(c){var e,f,g,h,i=c.src||[];return c.manager||(c.manager=d.defaultManager),h=c.manager,i._$feedUid?e=this.feeds[i._$feedUid]:(e=new a(i,c.explode),this.feeds[e.$$feedUid]=e,i._$feedUid=e.$$feedUid),g=this.getManager(h),this.connections[e.$$feedUid]||(this.connections[e.$$feedUid]={}),f=this.connections[e.$$feedUid][g.$$managerUid],f||(f=new b(e,g),this.connections[e.$$feedUid][g.$$managerUid]=f),f.addConfig(c),i},d.prototype.getManager=function(a){var b=a||d.defaultManager,e=this.managers[b];return e||(e=new c,this.managers[b]=e),e},d.prototype.setChart=function(a,b){this.charts[a]=b},d.prototype.getChart=function(a){return this.charts[a]},d}]),angular.module("vgraph").factory("ComponentPane",[function(){"use strict";function a(a,b,c){this.x=b,this.y=c,this.fitToPane=!1,this._pane={},this._bounds={},b||(b={}),c||(c={}),this.setBounds({min:b.min,max:b.max},{min:c.min,max:c.max})}return a.prototype.setBounds=function(a,b){return this._bounds.x=a,this._bounds.y=b,this},a.prototype.setPane=function(a,b){return this._pane.x=a,this._pane.y=b,this},a.prototype.isValid=function(a){var b;return this.filtered?(b=a._$index,this.filtered.$minIndex<=b&&b<=this.filtered.$maxIndex):!1},a.prototype.filter=function(a,b){var c,d,e,f,g,h,i=this.x,j=a.data;return j.length&&(a.clean(),c=this._bounds.x.min||j.$minIndex,d=this._bounds.x.max||j.$maxIndex,i.$min=c,i.$max=d,this._pane.x&&this._pane.x.stop?(e=this._pane.x,g=c+e.start*(d-c),h=c+e.stop*(d-c)):(g=c,h=d),b.$left=g,b.left=(g-c)/(d-c),b.$right=h,b.right=(h-c)/(d-c),f=j.$filter(g,h),this.fitToPane&&(f.$addNode(g,a.$makePoint(g),!0),f.$addNode(a.$makePoint(h))),f.$sort()),f},a}]),angular.module("vgraph").factory("ComponentView",["ComponentPane",function(a){"use strict";function b(){this.$vgvid=c++,this.models={},this.components=[]}var c=1;return b.prototype.addModel=function(a,b){return this.models[a]=b,this},b.prototype.configure=function(b,c,d){var e,f,g,h=this.addModel.bind(this);b||(b={}),e={min:b.x?b.x.min:void 0,max:b.x?b.x.max:void 0},f={min:b.y?b.y.min:void 0,max:b.y?b.y.max:void 0},this.x=e,this.y=f,this.box=d,this.pane=new a(this.x,this.y),this.managerName=b.manager,this.datumFactory=b.datumFactory,this.makeInterval=c.makeInterval,this.adjustSettings=c.adjustSettings,this.pane.fitToPane=c.fitToPane,e.tick=c.x.tick||{},e.scale=c.x.scale?c.x.scale():d3.scale.linear(),e.padding=c.x.padding,e.massage=c.x.massage,e.format=c.x.format||function(a){return a},f.tick=c.y.tick||{},f.scale=c.y.scale?c.y.scale():d3.scale.linear(),f.padding=c.y.padding,f.massage=c.y.massage,f.format=c.y.format||function(a){return a},b.models&&(g=angular.isFunction(b.models)?b.models():b.models,Object.keys(g).forEach(function(a){h(a,g[a])}))},b.prototype.setPage=function(a){var b=this.x;this.manager=a.getManager(this.managerName),b&&(b.min||0===b.min)&&b.max&&b.interval&&this.datumFactory&&this.manager.data.$fillPoints(b.min,b.max,b.interval,this.datumFactory)},b.prototype.register=function(a){this.components.push(a)},b.prototype.isReady=function(){return this.manager&&this.manager.ready},b.prototype.hasData=function(){return this.isReady()&&this.manager.data.length},b.prototype.sample=function(){var a,b,c,d=this,e=this.box,f=this.pane,g=this.models;this.offset={},this.filtered=f.filter(this.manager,this.offset),c=this.filtered,b=this.offset,c&&(this.x.scale.domain([b.$left,b.$right]).range([e.innerLeft,e.innerRight]),c.forEach(function(a){a._$interval=d.x.scale(a._$index)}),a=Object.keys(g),a.forEach(function(a){g[a].$follow(c,e)}))},b.prototype.setViewportValues=function(a,b){var c,d=this.box;this.y.padding&&(c=b===a?a*this.y.padding:(b-a)*this.y.padding,b+=c,a-=c),this.viewport.minValue=a,this.viewport.maxValue=b,this.y.scale.domain([a,b]).range([d.innerBottom,d.innerTop])},b.prototype.setViewportIntervals=function(a,b){var c=this.box;this.viewport.minInterval=a,this.viewport.maxInterval=b,this.x.scale.domain([a,b]).range([c.innerLeft,c.innerRight])},b.prototype.parse=function(){var a,b,c,d=this.manager.data;this.sample(),c=this.models,this.filtered&&(this.components.forEach(function(d){var e;d.parse&&(e=d.parse(c),e&&(null!==e.min&&(!a&&0!==a||a>e.min)&&(a=e.min),null!==e.max&&(!b&&0!==b||b<e.max)&&(b=e.max)))}),this.viewport||(this.viewport={}),this.setViewportValues(a,b),this.setViewportIntervals(this.offset.$left,this.offset.$right),this.adjustSettings&&this.adjustSettings(this.filtered.$maxIndex-this.filtered.$minIndex,b-a,d.$maxIndex-d.$minIndex))},b.prototype.build=function(){var a=this.models;this.components.forEach(function(b){b.build&&b.build(a)})},b.prototype.process=function(){var a=this.models;this.components.forEach(function(b){b.process&&b.process(a)})},b.prototype.finalize=function(){var a=this.models;this.components.forEach(function(b){b.finalize&&b.finalize(a)})},b.prototype.getPoint=function(a){var b=0,c=0,d=this.models,e={};return Object.keys(d).forEach(function(f){var g;e[f]=d[f].$getClosest(a,"_$interval"),g=e[f]._$interval,g&&(c++,b+=g)}),e.$pos=b/c,e},b}]),angular.module("vgraph").factory("DataCollection",[function(){"use strict";function a(a,b,c,d){var e,f,g=0,h=a.length-1;if(d||a.sort(function(a,b){return c(a)-c(b)}),c(a[g])>=b)return{left:g,right:g};if(c(a[h])<=b)return{left:h,right:h};if(a.length){for(;h-g>1;)e=Math.floor((h+g)/2),f=c(a[e]),f===b?(h=e,g=e):f>b?h=e:g=e;return h!==e&&c(a[h])===b?{left:h,right:h}:g!==e&&c(a[g])===b?{left:g,right:g}:{left:g,right:h}}}function b(a){return null!==a&&void 0!==a&&"object"!=typeof a}function c(){this._$index={},this.$dirty=!1}return c.prototype=[],c.isNumeric=b,c.prototype.$fillPoints=function(a,b,c,d){var e,f,g;for(e=a,f=b+c;f>e;e+=c)g=d(),g._$index=e,this._$index[e]=g,this.push(g)},c.prototype._register=function(a,b,c){var d,e=+a;return this._$index[e]||(this._$index[e]=b,c?(this.length&&e>this[0]._$index&&(this.$dirty=!0),this.unshift(b)):(this.length&&e<this[this.length-1]._$index&&(this.$dirty=!0),this.push(b)),Object.keys(b).forEach(function(a){var c=b[a];(c||0===c)&&(d=!0)}),d&&(void 0===this.$minIndex?(this.$minIndex=e,this.$maxIndex=e):this.$maxIndex<e?this.$maxIndex=e:this.$minIndex>e&&(this.$minIndex=e)),b._$index=e),b},c.prototype._makeNode=function(a){var b=+a,c=this.$getNode(a);if(isNaN(b))throw new Error("index must be a number, not: "+a+" that becomes "+b);return c||(c={},this._register(b,c)),c},c.prototype.$getIndexs=function(){return Object.keys(this._$index)},c.prototype.$getNode=function(a){var b=+a;return this._$index[b]},c.prototype._setValue=function(a,b,c){var d=a._$index;a.$setValue?a.$setValue(b,c):a[b]=c,(c||0===c)&&(void 0===this.$minIndex?(this.$minIndex=d,this.$maxIndex=d):this.$maxIndex<d?this.$maxIndex=d:this.$minIndex>d&&(this.$minIndex=d))},c.prototype.$setValue=function(a,b,c){var d=this._makeNode(a);return this._setValue(d,b,c),d},c.prototype.$addNode=function(a,b,c){var d,e,f;if(b?e=+a:(b=a,e=b._$index),f=this.$getNode(e))f.$merge?f.$merge(b):(d=this._setValue.bind(this),Object.keys(b).forEach(function(a){"_$index"!==a&&d(f,a,b[a])}));else{if(this.$makeNode)f=this.$makeNode(b);else{if(b._$index&&b._$index!==e)throw new Error("something wrong with index -> ",b._$index,e);f=b}this._register(e,f,c)}return f},c.prototype.$pos=function(b,c){var d;return c||(c="_$index"),this.$sort(),d=a(this,b,function(a){return a[c]},!0),d.field=c,d},c.prototype.$getClosestPair=function(a,b){var c=this.$pos(a,b);return{left:this[c.left],right:this[c.right],field:c.field}},c.prototype.$getClosest=function(a,b){var c,d,e=this.$getClosestPair(a,b);return c=a-e.left[e.field],d=e.right[e.field]-a,d>c?e.left:e.right},c.prototype.$sort=function(){this.$dirty&&(this.sort(function(a,b){return a._$index-b._$index}),this.$dirty=!1)},c.prototype.$filter=function(a,b){var d,e=-1,f=new c;this.$sort();do e++,d=this[e];while(d&&d._$index<a);for(;d&&d._$index<=b;)f.$addNode(d),e++,d=this[e];return f.$parent=this,f},c}]),angular.module("vgraph").factory("DataFeed",["makeEventing",function(a){"use strict";function b(a,b){this.explode=b,this.setSource(a),this.$$feedUid=c++}var c=1;return b.prototype.setSource=function(a){var b=this,c=a.push;this.data=a,this._readPos=0,a.push=function(){c.apply(this,arguments),b.$push()},a.$ready=function(){b.$trigger("ready")},a.$error=function(a){b.$trigger("error",a)},a.$reset=function(){b.$trigger("reset"),b._readPos=0,b.data.length=0},this.$push()},a(b.prototype),b.prototype.$push=function(){var a=this;this._$push||(this._$push=setTimeout(function(){var b=a._readNext();for(b&&a.$trigger("ready");b;)a.$trigger("data",b),b=a._readNext();a._$push=null},0))},b.prototype._readAll=function(a){for(var b=this._read(0);b;)a(b),b=this._read(b.next)},b.prototype._readNext=function(){var a=this._read(this._readPos);return a&&(this._readPos=a.next),a},b.prototype._read=function(a){var b,c=this.data,d=this.explode;return!c.length||a>=c.length?null:d?(b=c[a],{points:d(b),next:a+1,ref:b}):{points:c.slice(a),next:c.length}},b}]),angular.module("vgraph").factory("DataLoader",[function(){"use strict";function a(a,c){var d=this,e=[],f=this._process.bind(this),g=a.$on("ready",function(){d.ready=!0}),h=a.$on("data",function(a){var b,c,d,g;for(b=0,c=a.points.length;c>b;b++)for(d=0,g=e.length;g>d;d++)f(e[d],a.points[b])}),i=a.$on("error",function(a){c.setError(a)}),j=a.$on("reset",function(){c.reset(),d.ready=!1});this.$$loaderUid=b++,this.feed=a,this.confs=e,this.dataManager=c,c.$follow(this),this.$destroy=function(){c.$ignore(this),i(),j(),g(),h()}}var b=1;return a.unregister=function(){},a.prototype.addConfig=function(a){var b=Object.keys(a.readings),c=this._process.bind(this);b.forEach(function(b){var c=a.readings[b];"string"==typeof c&&(a.readings[b]=function(a){return a[c]})}),a.parseInterval||(a.parseInterval=function(b){return b[a.interval]}),this.feed._readAll(function(b){var d,e,f=b.points;for(d=0,e=f.length;e>d;d++)c(a,f[d])}),this.confs.push(a)},a.prototype.removeConf=function(){},a.prototype._process=function(a,b){var c,d=this.dataManager,e=Object.keys(a.readings);if(!a.isDefined||a.isDefined(b))try{c=a.parseInterval(b),e.forEach(function(e){d.setValue(c,e,a.readings[e](b))})}catch(f){console.log("failed to load",b,c),console.log("conf:",a),console.log(f)}},a}]),angular.module("vgraph").factory("DataManager",["DataCollection",function(a){"use strict";function b(){this.$$managerUid=d++,this.$dataProc=c(20,200,function(a){var b=a.registrations;b.forEach(function(a){a()})}),this.construct(),this.reset()}function c(a,b,c,d){function e(){var b=+new Date;b>h||b>g?(h=null,c.apply(d,f)):setTimeout(e,a)}var f,g,h;return function(){var c=+new Date;g=c+a,f=arguments,h||(h=c+b,setTimeout(e,a))}}var d=1;return b.prototype.construct=function(){var a=[];this.registrations=[],this.errorRegistrations=[],this.getLoaders=function(){return a},this.$follow=function(b){a.push(b)},this.$ignore=function(b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}},b.prototype.reset=function(){this.data=new a,this.ready=!1,this.dataReady(!0)},b.prototype.onError=function(a){this.errorRegistrations.push(a)},b.prototype.setError=function(a){var b,c;for(b=0,c=this.errorRegistrations.length;c>b;b++)this.errorRegistrations[b](a)},b.prototype.getNode=function(a){return this.dataReady(),this.data.$getNode(a)},b.prototype.setValue=function(a,b,c){return this.dataReady(),this.ready||!c&&0!==c||(this.ready=!0),this.data.$setValue(a,b,c)},b.prototype.removePlot=function(){},b.prototype.dataReady=function(a){var b=this.registrations;a?b.forEach(function(a){a()}):this.$dataProc(this)},b.prototype.register=function(a){this.registrations.push(a)},b.prototype.clean=function(){this.data.$sort()},b.prototype.$makePoint=function(a){var b,c,d,e,f=this.data.$pos(a,"_$index");return f.right===f.left?this.data[f.right]:(b=this.data[f.right],c=this.data[f.left],d={},e=(a-c._$index)/(b._$index-c._$index),Object.keys(b).forEach(function(a){var f=c[a],g=b[a];void 0!==f&&null!==f&&void 0!==g&&null!==g&&(d[a]=f+(g-f)*e)}),d.$faux=!0,d._$index=a,d)},b}]),angular.module("vgraph").factory("DrawBox",["DrawBuilder",function(a){"use strict";function b(a){this.elemental=a}function c(a,b,c,d,e){var f;return a>b&&(f=a,a=b,b=f),c>d&&(f=c,c=d,d=f),void 0===e.x1?(e.x1=a,e.x2=b,e.y1=c,e.y2=d):(e.x1>a&&(e.x1=a),b>e.x2&&(e.x2=b),e.y1>c&&(e.y1=c),d>e.y2&&(e.y2=d)),e}return b.prototype=new a,b.prototype.makeSet=function(){return{}},b.prototype.isValidSet=function(a){return void 0!==a.x1},b.prototype.mergeSet=function(a,b){var d=a.x1,e=a.x2,f=a.y1,g=a.y2;return null===f||null===g?!0:(f=void 0===f?b.y1:this.scale1(f),g=void 0===g?b.y2:this.scale2(g),c(d,e,f,g,b),void 0)},b.prototype.makePath=function(a){return a?"M"+(a.x1+","+a.y1)+"L"+(a.x2+","+a.y1)+"L"+(a.x2+","+a.y2)+"L"+(a.x1+","+a.y2)+"Z":void 0},b.prototype.makeElement=function(a){return a?'<rect x="'+a.x1+'" y="'+a.y1+'" width="'+(a.x2-a.x1)+'" height="'+(a.y2-a.y1)+'"/>':void 0},b}]),angular.module("vgraph").factory("DrawBuilder",[function(){"use strict";function a(){}return a.isNumeric=function(a){return null===a?!1:Number.isFinite?Number.isFinite(a)&&!Number.isNaN(a):isFinite(a)&&!isNaN(a)},a.prototype.preparse=function(a){return a},a.prototype.makeSet=function(){return[]},a.prototype.mergeSet=function(a,b){return a?(b.push(a),!1):!0},a.prototype.isValidSet=function(a){return 0!==a.length},a.prototype.convert=function(a){return this.parse(a)},a.prototype.parse=function(a){var b,c,d,e,f=this.makeSet(),g=[],h=this.mergeSet.bind(this);for(b=0,c=a.length;c>b;b++)d=this.preparse(a[b]),e=d?h(d,f):!0,e&&this.isValidSet(f)&&(g.push(f),f=this.makeSet());return this.isValidSet(f)&&g.push(f),g},a.prototype.makeElement=function(a){return console.log("makeElement",a),"<text>Element not overriden</text>"},a.prototype.makePath=function(a){return console.log("makePath",a),"M0,0Z"},a}]),angular.module("vgraph").factory("DrawFill",["DrawBuilder",function(a){"use strict";function b(){}return b.prototype=new a,b.prototype.mergeSet=function(b,c){var d=b.x,e=b.y1,f=b.y2,g=c[c.length-1];if(a.isNumeric(e)&&a.isNumeric(f))c.push({x:d,y1:this.scale1(e),y2:this.scale2(f)});else{if(!g||null===e||null===f)return!0;e=void 0===e?g.y1:this.scale1(e),f=void 0===f&&g?g.y2:this.scale2(f),c.push({x:d,y1:e,y2:f})}},b.prototype.makePath=function(a){var b,c,d,e=[],f=[];if(a.length){for(b=0,c=a.length;c>b;b++)d=a[b],e.push(d.x+","+d.y1),f.unshift(d.x+","+d.y2);return"M"+e.join("L")+"L"+f.join("L")+"Z"}},b.prototype.makeElement=function(a){return'<path d="'+this.makePath(a)+'"></path>'},b}]),angular.module("vgraph").factory("DrawIcon",["DrawBox",function(a){"use strict";function b(a,b){this.box=a,this.template=b,this.elemental=!0}return b.prototype=new a,b.prototype.makeElement=function(a){var b,c;return a?(b=(a.x1+a.x2-this.box.width)/2,c=(a.y1+a.y2-this.box.height)/2,'<g transform="translate('+b+","+c+')">'+this.template+"</g>"):void 0},b}]),angular.module("vgraph").factory("DrawLine",["DrawBuilder",function(a){"use strict";function b(){}return b.prototype=new a,b.prototype.mergeSet=function(b,c){var d=b.x,e=b.y,f=c[c.length-1];if(a.isNumeric(e))c.push({x:d,y:this.scale(e)});else{if(!f||void 0!==e)return!0;c.push({x:d,y:f.y})}},b.prototype.makePath=function(a){var b,c,d,e=[];if(a.length){for(b=0,c=a.length;c>b;b++)d=a[b],e.push(d.x+","+d.y);return"M"+e.join("L")}},b.prototype.makeElement=function(a){return a.length?'<path d="'+this.makePath(a)+'"></path>':void 0},b}]),angular.module("vgraph").factory("makeEventing",[function(){"use strict";return function(a){a.$on=function(a,b){var c=this;return this._$listeners||(this._$listeners={}),this._$listeners[a]||(this._$listeners[a]=[]),this._$listeners[a].push(b),function(){c._$listeners[a].splice(c._$listeners[a].indexOf(b),1)}},a.$subscribe=function(a){var b=this,c=[],d=Object.keys(a);return d.forEach(function(d){var e=a[d];c.push(b.$on(d,e))}),function(){c.forEach(function(a){a()})}},a.$trigger=function(a,b){var c,d,e;if(this._$listeners&&(c=this._$listeners[a]))for(d=0,e=c.length;e>d;d++)c[d](b)}}}]),angular.module("vgraph").factory("StatCalculations",[function(){"use strict";function a(a){return null===a?!1:Number.isFinite?Number.isFinite(a)&&!Number.isNaN(a):isFinite(a)&&!isNaN(a)}function b(a,b){var c=[];return a.forEach(function(a){c.push("$"+b+"$"+a.field)}),c}return{$resetCalcs:function(a){var b,c;for(b=0,c=a.length;c>b;b++)a[b].field=a[b].name},$getFields:function(a){var b,c,d=[];for(b=0,c=a.length;c>b;b++)d.push(a[b].field);return d},$setFields:function(a,b){var c,d;for(c=0,d=a.length;d>c;c++)a[c].field=b[c]},sum:function(a,c){var d=b(a,"sum");return a.forEach(function(a,b){var e=a.field,f=d[b],g=0;c.forEach(function(a){var b=a[e];b&&(g+=b)}),c[f]=g,a.field=f}),d},average:function(a,c){var d=b(a,"average");return a.forEach(function(a,b){var e=a.field,f=d[b],g=0,h=0;c.forEach(function(a){var b=a[e];b?(g+=b,h++):0===b&&h++}),c[f]=g/h,a.field=f}),d},stack:function(a,c){var d=b(a,"stack"),e=this.$getFields(a);return c.forEach(function(a){var b=0;e.forEach(function(c,e){var f=a[c]||0;b+=f,a[d[e]]=b})}),a.forEach(function(a,b){a.field=d[b]}),d},limits:function(b,c){var d,e,f,g,h;if(angular.isArray(c))for(d=0,e=c.length;e>d;d++)f=this.limits(b,c[d]),void 0===g?(g=f.min,h=f.max):(f.min<g&&(g=f.min),f.max>h&&(h=f.max));else if(c&&c.getValue)for(d=0,e=b.length;e>d;d++)f=c.$getValue(b[d]),a(f)&&(void 0===g?(g=f,h=f):g>f?g=f:f>h&&(h=f));return{min:g,max:h}}}}]),angular.module("vgraph").factory("LinearNode",[function(){"use strict";function a(a){var b=[];this._$minInterval=a._$interval,this._$count=0,this._$interval=0,Object.keys(a).forEach(function(a){var c=a.charAt(0);"_"!==c&&b.push(a)}),this._$keys=b,this.$merge(a)}return a.prototype.$merge=function(a){var b=this;this._$maxInterval=a._$interval,this._$interval+=a._$interval,this._$count++,this._$keys.forEach(function(c){b[c]||0===b[c]?b[c]+=a[c]:b[c]=a[c]})},a.prototype.$finalize=function(a){var b=this,c=this._$count,d=this._$index;this._$interval=this._$interval/c,this._$keys.forEach(function(e){var f=b[e];
(f||0===f)&&((void 0===a[e]||a[e]<d)&&(a[e]=d),b[e]=f/c)})},a}]),angular.module("vgraph").factory("LinearSampler",["DataCollection","LinearNode",function(a,b){"use strict";function c(c,e){this.$modelUid=d++,this.$stats={},this.$indexer=c,this.$makeNode=e||function(a){return new b(a)},a.call(this)}var d=1;return c.prototype=new a,c.prototype.$follow=function(a){var b,c,d,e,f=this.$indexer;for(this.length=0,this._$index={},a.$sort(),this.$parent=a,b=0,c=a.length;c>b;b++)e=a[b],d=f(e),this.$addNode(d,e).$x=e._$index;for(b=0,c=this.length;c>b;b++)this[b].$finalize(this.$stats)},c}]),angular.module("vgraph").directive("vgraphAxis",[function(){"use strict";function a(a,b){return!(a.bottom<b.top||a.top>b.bottom||a.right<b.left||a.left>b.right)}return{scope:{orient:"=vgraphAxis",adjust:"=axisAdjust",rotation:"=tickRotation"},require:["^vgraphChart"],link:function(b,c,d,e){function f(){D.attr("visibility","hidden")}var g,h,i,j,k,l,m,n,o,p,q,r=e[0],s=r.getView(d.view||"default"),t=d3.svg.axis(),u="axis",v=r.box,w=0,x=null,y=!0,z=!1,A=parseInt(d.tickLength)||0,B=parseInt(d.tickPadding)||3,C=parseInt(d.tickMargin)||0,D=d3.select(c[0]);switch(D.attr("visibility","hidden"),l=D.append("g").attr("class","ticks"),p=D.append("g").attr("class","padding"),m=p.append("g").attr("class","tick-marks"),n=p.append("rect").attr("class","tick-margin"),q=D.append("g").attr("class","label-wrap"),d.tickRotation&&(x=parseInt(d.tickRotation,10)%360),d.labelOffset&&(w=b.$eval(d.labelOffset)),d.labelClean&&(y=b.$eval(d.labelClean)),d.labelEndpoints&&(z=b.$eval(d.labelEndpoints)),d.axisLabel&&(o=q.append("text").attr("class","axis-label label"),b.$parent.$watch(d.axisLabel,function(a){o.text(a)})),g=function(){d.tickMarks?(t.tickValues(b.$eval(d.tickMarks)),i=[]):d.tickCount?(t.ticks(b.$eval(d.tickCount)),i=[]):(t.ticks(10),i=[])},b.orient){case"top":h=function(){var a;if(D.attr("class",u+" x top").attr("transform","translate("+v.left+","+(v.top-A)+")").attr("width",v.width).attr("height",v.padding.top),o&&o.attr("text-anchor","middle").attr("x",v.width/2).attr("y",v.padding.top-w),C&&n.attr("height",C).attr("width",v.innerWidth).attr("x",0).attr("y",-C),m.attr("transform","translate(-"+v.margin.left+",0)"),i&&(t.orient("top").tickFormat(s.x.format).innerTickSize(-(v.innerHeight+A+C)).outerTickSize(0).tickPadding(B+A+C).scale(s.x.scale),s.x.tick.interval&&t.ticks(s.x.tick.interval,s.x.tick.step),l.attr("transform","translate(-"+v.margin.left+","+v.padding.top+")").call(t),a=D.selectAll("g.axis-cap").data(s.x.scale.domain()),z&&(a.enter().append("g").attr("class",function(a,b){return"axis-cap "+(b?"axis-max":"axis-min")}).append("text"),a.exit().remove(),a.attr("transform",function(a){return"translate("+(s.x.scale(a)-v.margin.left)+",0)"}).select("text").text(function(a){var b=s.x.format(a);return(""+b).match("NaN")?"":b}).attr("dy","-0.25em").attr("y",v.padding.top).attr("text-anchor","middle")),x)){if(null===l.select(".tick text")[0][0])return;l.selectAll(".tick text").attr("transform","translate(0,"+l.select(".tick text").attr("y")+") rotate("+x+",0,0)").attr("y","0").style("text-anchor",x%360>0?"end":"start"),a.select("text").attr("transform","rotate("+x+",0,0)").style("text-anchor",b.rotation%360>0?"end":"start")}};break;case"bottom":h=function(){var a;if(D.attr("class",u+" x bottom").attr("transform","translate("+v.left+","+v.innerBottom+")").attr("width",v.width).attr("height",v.padding.bottom),o&&o.attr("text-anchor","middle").attr("x",v.width/2).attr("y",v.padding.bottom+w),C&&n.attr("height",C).attr("width",v.innerWidth).attr("x",0).attr("y",0),m.attr("transform","translate(-"+v.margin.left+",0)"),i&&(t.orient("bottom").tickFormat(s.x.format).innerTickSize(v.innerHeight+A+C).outerTickSize(0).tickPadding(B+A+C).scale(s.x.scale),s.x.tick.interval&&t.ticks(s.x.tick.interval,s.x.tick.step),l.attr("transform","translate(-"+v.margin.left+","+-v.innerHeight+")").call(t),a=D.selectAll("g.axis-cap").data(s.x.scale.domain()),z&&(a.enter().append("g").attr("class",function(a,b){return"axis-cap "+(b?"axis-max":"axis-min")}).append("text"),a.exit().remove(),a.attr("transform",function(a){return"translate("+(s.x.scale(a)-v.margin.left)+",0)"}).select("text").text(function(a){var b=s.x.format(a);return(""+b).match("NaN")?"":b}).attr("dy","1em").attr("y",0).attr("text-anchor","middle")),x)){if(null===l.select(".tick text")[0][0])return;l.selectAll(".tick text").attr("transform",function(){return"translate(0,"+d3.select(this).attr("y")+") rotate("+x+",0,0)"}).attr("y","0").style("text-anchor",x%360>0?"start":"end"),a.select("text").attr("transform","rotate("+x+",0,0)").style("text-anchor",b.rotation%360>0?"start":"end")}};break;case"right":h=function(){var a;D.attr("class",u+" y right").attr("transform","translate("+A+","+v.top+")").attr("width",v.padding.right).attr("height",v.height),q.attr("transform","translate("+(v.right-v.padding.right)+","+v.height+") rotate( 90 )"),o&&o.attr("text-anchor","middle").attr("x",-(v.height/2)).attr("y",-w),C&&n.attr("height",v.innerHeight).attr("width",C).attr("x",-C).attr("y",0),m.attr("transform","translate(-"+v.padding.right+","+(-v.top||0)+")"),i&&(t.orient("right").tickFormat(s.y.format).innerTickSize(-(v.innerWidth+A+C)).outerTickSize(0).tickPadding(B+A+C).scale(s.y.scale),s.y.tick.interval&&t.ticks(s.y.tick.interval,s.y.tick.step),l.attr("transform","translate("+v.innerRight+","+(-v.top||0)+")"),l.call(t),l.select(".domain").attr("transform","translate("+(A+C)+",0)"),z&&(a=D.selectAll("g.axis-cap").data(s.y.scale.domain()),a.enter().append("g").attr("class",function(a,b){return"axis-cap "+(b?"axis-max":"axis-min")}).append("text"),a.exit().remove(),a.attr("transform",function(a){return"translate(0,"+(s.y.scale(a)-v.margin.top)+")"}).select("text").text(function(a){var b=s.y.format(a);return(""+b).match("NaN")?"":b}).attr("dy",".25em").attr("x",v.padding.left-t.tickPadding()).attr("text-anchor","end")))};break;case"left":h=function(){var a;D.attr("class",u+" y left").attr("transform","translate("+v.left+","+v.top+")").attr("width",v.padding.left).attr("height",v.height),q.attr("transform","translate("+v.padding.left+","+v.height+") rotate( -90 )"),o&&o.attr("text-anchor","middle").attr("x",v.height/2).attr("y",-w),C&&n.attr("height",v.innerHeight).attr("width",C).attr("x",-C).attr("y",0),m.attr("transform","translate("+v.padding.left+","+(-v.top||0)+")"),i&&(t.orient("left").tickFormat(s.y.format).innerTickSize(-(v.innerWidth+A+C)).outerTickSize(0).tickPadding(B+A+C).scale(s.y.scale),s.y.tick.interval&&t.ticks(s.y.tick.interval,s.y.tick.step),l.attr("transform","translate("+(v.padding.left-A-C)+","+(-v.top||0)+")").call(t),l.select(".domain").attr("transform","translate("+(A+C)+",0)"),z&&(a=D.selectAll("g.axis-cap").data(s.y.scale.domain()),a.enter().append("g").attr("class",function(a,b){return"axis-cap "+(b?"axis-max":"axis-min")}).append("text"),a.exit().remove(),a.attr("transform",function(a){return"translate(0,"+(s.y.scale(a)-v.margin.top)+")"}).select("text").text(function(a){var b=s.y.format(a);return(""+b).match("NaN")?"":b}).attr("dy",".25em").attr("x",v.padding.left-t.tickPadding()).attr("text-anchor","end")))}}b.$on("$destroy",r.$subscribe({error:f,loading:f})),s.register({build:function(){void 0===i&&g(),h()},process:function(){i.length=0,A&&(l.selectAll(".tick text").each(function(a){i.push({el:this,val:a,position:this.getBoundingClientRect()})}),i.sort(function(a,b){var c=a.position.top-b.position.top;return c?c:a.position.left-b.position.left})),y&&(j=D.select(".axis-min text").node(),j&&(j=j.getBoundingClientRect()),k=D.select(".axis-max text").node(),k&&(k=k.getBoundingClientRect()))},finalize:function(){var b,c,d,e,f,g,h=s.filtered,l={};if(!h.length)return void D.attr("visibility","hidden");for(D.attr("visibility",""),m.selectAll("line").remove(),e=0,f=i.length;f>e;e++)b=!0,c=i[e],d=c.position,y&&j&&(a(d,j)||a(d,k))?(c.el.setAttribute("class","collided"),b=!1):void 0===l.left?(l.left=d.left,l.right=d.right,l.width=d.width,l.top=d.top,l.bottom=d.bottom,l.height=d.height,c.el.setAttribute("class","")):y&&a(d,l)?(c.el.setAttribute("class","collided"),b=!1):(g=!1,d.left<l.left&&(l.left=d.left,g=!0),d.right>l.right&&(l.right=d.right,g=!0),g&&(l.width=l.right-l.left,g=!1),d.top<l.top&&(l.top=d.top,g=!0),d.bottom>l.bottom&&(l.bottom=d.bottom,g=!0),g&&(l.height=l.bottom-l.top),c.el.setAttribute("class",""))}},"axis-"+b.orient)}}}]),angular.module("vgraph").directive("vgraphBar",["ComponentGenerator","StatCalculations","ComponentElement",function(a,b,c){"use strict";return{scope:{config:"=vgraphBar",pair:"=?pair"},require:["^vgraphChart","vgraphBar"],controller:c,link:function(b,c,d,e){var f=c[0],g=a.normalizeConfig(b.config),h=b.pair,i=e[0],j=e[1],k="bar ";j.setElement(f),j.setDrawer(a.makeBarCalc(i,g,h,d.width)),j.setReferences([g,h]),j.register=function(a,b){i.registerElement(a,b)},g.classExtend&&(k+=g.classExtend+" "),k+=d.className||g.className,f.setAttribute("class",k),i.getView(g.view).register(j)}}}]),angular.module("vgraph").directive("vgraphBox",["ComponentGenerator","StatCalculations","ComponentElement",function(a,b,c){"use strict";return{scope:{config:"=vgraphBox"},require:["^vgraphChart","vgraphBox"],controller:c,link:function(b,c,d,e){var f=c[0],g=a.normalizeConfig(b.config),h=e[0],i=e[1],j="box ";i.setElement(f),i.setDrawer(a.makeBoxCalc(h,g)),i.setReferences(g),i.register=function(a,b){h.registerElement(a,b)},g.classExtend&&(j+=g.classExtend+" "),j+=d.className||g.className,f.setAttribute("class",j),h.getView(g.view).register(i)}}}]),angular.module("vgraph").directive("vgraphChart",["ComponentChart",function(a){"use strict";function b(a){a.$mat&&a.innerWidth&&(a.$mat.attr("class","mat").attr("width",a.innerWidth).attr("height",a.innerHeight).attr("transform","translate("+a.innerLeft+","+a.innerTop+")"),a.$frame.attr("class","frame").attr("width",a.width).attr("height",a.height).attr("transform","translate("+a.left+","+a.top+")"))}return{scope:{settings:"=vgraphChart","interface":"=?interface"},controller:a,require:["vgraphChart","^vgraphPage"],link:function(a,c,d,e){var f,g=e[1],h=e[0],i=h.box;f="svg"===c[0].tagName?c[0]:c.find("svg")[0],h.$root=c[0],i.register(function(){b(i),h.rerender(function(){a.$apply()})}),i.targetSvg(f),i.$mat=d3.select(f).insert("rect",":first-child"),i.$frame=d3.select(f).insert("rect",":first-child"),b(i),a.$watch("settings",function(a){h.configure(g,a)}),a["interface"]&&(a["interface"].resize=i.resize.bind(i),a["interface"].error=h.error.bind(h)),d.name&&g.setChart(d.name,h)},restrict:"A"}}]),angular.module("vgraph").directive("vgraphCompare",["$compile","ComponentGenerator","ComponentElement",function(a,b,c){"use strict";return{scope:{config1:"=config1",config2:"=config2"},require:["^vgraphChart"],link:function(b,d,e,f){var g,h=f[0],i=c.svgCompile('<g><path vgraph-line="config1" pair="config2" class-name="'+(e.className||"")+'"></path></g>')[0];d[0].appendChild(i),a(i)(b),g=h.$on("focus-point",function(a){var c=b.config1,d=b.config2,f=a[c.view][c.model],g=a[d.view][d.model],i=h.getView(c.view),j=h.getView(d.view);a[e.reference||"compare"]={value:Math.abs(f[c.field]-g[d.field]),y:(i.y.scale(f[c.field])+j.y.scale(g[d.field]))/2,x:(f._$interval+g._$interval)/2}}),b.$on("$destroy",g)}}}]),angular.module("vgraph").directive("vgraphFocus",[function(){"use strict";return{require:["^vgraphChart"],link:function(a,b,c,d){var e=d[0],f=e.box,g=d3.select(b[0]),h=g.append("rect").attr("class","focus").attr("visibility","hidden");f.register(function(){h.attr("height",f.innerHeight).attr("y",f.innerTop)}),a.$watch("follow",function(a){var b,c,d;a&&void 0!==a.xDiff&&(b=Math.abs(a.xDiff),c=a.x0-b,d=a.x0+b,h.attr("visibility","visible"),c>f.innerLeft?h.attr("x",c):(c=f.innerLeft,h.attr("x",f.innerLeft)),d>f.innerRight?h.attr("width",f.innerRight-c):h.attr("width",d-c))}),a.$watch("stop",function(a){var b,c,d,g,i;a&&(h.attr("visibility","hidden"),b=Math.abs(a.xDiff),b>3&&(c=a.x0-b,d=a.x0+b,c<f.innerLeft?c=0:c-=f.innerLeft,d>f.innerRight?d=f.innerWidth:d-=f.innerLeft,g=e.views[Object.keys(e.views)[0]].offset,i=f.innerWidth*g.right-f.innerWidth*g.left,e.setPane((f.innerWidth*g.left+c/f.innerWidth*i)/f.innerWidth,(f.innerWidth*g.right-(f.innerWidth-d)/f.innerWidth*i)/f.innerWidth),e.rerender()))})},scope:{follow:"=vgraphFocus",stop:"=loseFocus"}}}]),angular.module("vgraph").directive("vgraphHighlight",[function(){"use strict";return{require:["^vgraphChart"],scope:!0,link:function(a,b,c,d){d[0].$on("highlight",function(b){a[c.vgraphHighlight]=b,a.$digest()})}}}]),angular.module("vgraph").directive("vgraphIcon",["ComponentGenerator","StatCalculations","ComponentElement",function(a,b,c){"use strict";return{scope:{config:"=vgraphIcon"},require:["^vgraphChart","vgraphIcon"],controller:c,link:function(b,c,d,e){var f=c[0],g=d3.select(f),h=g.node().getBBox(),i=a.normalizeConfig(b.config),j=e[0],k=e[1],l=f.innerHTML,m="icon ",n=k.parse;k.parse=function(a){var b=n.call(this,a),c=h.height/2;return b.min-=c,b.max+=c,b},f.innerHTML="",k.setElement(f),k.setDrawer(a.makeIconCalc(j,i,h,l)),k.setReferences([i]),i.classExtend&&(m+=i.classExtend+" "),m+=d.className||i.className,f.setAttribute("class",m),j.getView(i.view).register(k)}}}]),angular.module("vgraph").directive("vgraphIndicator",[function(){"use strict";return{require:["^vgraphChart"],scope:{cfg:"=?vgraphIndicator"},link:function(a,b,c,d){function e(){l.attr("visibility","hidden")}var f,g,h=a.cfg,i=d[0],j=a.$eval(c.pointRadius)||3,k=a.$eval(c.outerRadius),l=d3.select(b[0]).attr("transform","translate(1000,1000)").attr("visibility","hidden"),m=l.append("circle").attr("r",j),n=l.append("circle").attr("r",j);m.attr("class","point inner "+h.className),n.attr("class","line outer "+h.className),k&&(g=function(){n.transition().duration(1e3).attr("r",k).transition().duration(1e3).attr("r",j).ease("sine").each("end",function(){setTimeout(function(){g()},3e3)})})(),a.$on("$destroy",i.$subscribe({error:e,loading:e})),f=i.getView(h.view),f.register({finalize:function(a){var b,c,d,g=h.field,i=a[h.model];d=i[i.length-1],d&&d[g]&&i.$parent.$maxIndex===i.$parent.$parent.$maxIndex?(b=d._$interval,c=f.y.scale(d[g]),b&&c&&(l.attr("transform","translate("+b+","+c+")"),l.attr("visibility","visible"))):e()}})}}}]),angular.module("vgraph").directive("vgraphInteract",[function(){"use strict";return{require:["^vgraphChart"],scope:{dragPos:"=?dChange",dragStop:"=?dEnd",dragStart:"=?dBegin"},link:function(a,b,c,d){var e,f,g=d[0],h=!1,i=g.box,j=d3.select(b[0]),k=j.append("rect").style("opacity","0").attr("class","focal").on("mousemove",function(){var a=d3.mouse(this);h||(clearTimeout(f),g.$trigger("focus",{x:a[0],y:a[1]}))}).on("mouseout",function(){h||(f=setTimeout(function(){g.$trigger("focus",null)},100))});j.attr("class","interactive"),j.call(d3.behavior.drag().on("dragstart",function(){e=d3.mouse(b[0]),h=!0,g.$trigger("focus",null),a.dragStart={x:e[0],y:e[1]},a.$apply()}).on("dragend",function(){var c=d3.mouse(b[0]);h=!1,a.dragStop={x0:e[0],y0:e[1],x1:c[0],x2:c[1],xDiff:c[0]-e[0],yDiff:c[1]-e[1]},a.$apply()}).on("drag",function(){var c=d3.mouse(b[0]);a.dragPos={x0:e[0],y0:e[1],x1:c[0],x2:c[1],xDiff:c[0]-e[0],yDiff:c[1]-e[1]},a.$apply()})),j.on("dblclick",function(){g.setPane({start:null,stop:null},{start:null,stop:null}),g.rerender()}),angular.forEach(g.views,function(a){a.register({finalize:function(){k.attr({x:i.innerLeft,y:i.innerTop,width:i.innerWidth,height:i.innerHeight})}})}),a.dragStart||(a.dragStart={}),a.dragPos||(a.dragPos={}),a.dragStop||(a.dragStop={})}}}]),angular.module("vgraph").directive("vgraphLeading",[function(){"use strict";return{require:["^vgraphChart"],scope:{config:"=vgraphLeading"},link:function(a,b,c,d){function e(a){var b,c,d;if(h={},j.selectAll("line").remove(),a)for(c=0,d=a.length;d>c;c++)b=a[c],h[b.name]=j.append("line").attr("class","line "+b.className)}function f(){j.attr("visibility","hidden")}function g(){var b,c=!0,d=[];angular.forEach(a.config,function(a){var b=i.views[a.view].models[a.model],e=b._$index[b.$stats[a.field]],f=e[a.field];e._$index<b.$parent.$maxIndex?c=!1:(f=e[a.field],d.push({el:h[a.name],x:e._$interval,y:i.views[a.view].y.scale(f)}))}),d.sort(function(a,b){return a.y-b.y}),angular.forEach(d,function(a){b&&b.el.attr("x1",b.x).attr("x2",a.x).attr("y1",b.y).attr("y2",a.y),b=a}),b&&c?(j.attr("visibility","visible"),b.el.attr("x1",b.x).attr("x2",b.x).attr("y1",b.y).attr("y2",i.box.innerBottom)):f()}var h,i=d[0],j=d3.select(b[0]);a.$watchCollection("config",e),a.$on("$destroy",i.$subscribe({error:f,loading:f,success:g}))}}}]),angular.module("vgraph").directive("vgraphLine",["ComponentGenerator","StatCalculations","ComponentElement",function(a,b,c){"use strict";return{scope:{config:"=vgraphLine",pair:"=?pair"},require:["^vgraphChart","vgraphLine"],controller:c,link:function(b,c,d,e){var f,g,h=c[0],i=a.normalizeConfig(b.config),j=e[0],k=e[1];k.setElement(h),d.pair?(f=a.normalizeConfig(b.pair),g="fill ",k.setDrawer(a.makeFillCalc(j,i,f)),k.setReferences([i,f])):(g="line ",k.setDrawer(a.makeLineCalc(j,i)),k.setReferences(i)),i.classExtend&&(g+=i.classExtend+" "),g+=d.className||i.className,h.setAttribute("class",g),j.getView(i.view).register(k)}}}]),angular.module("vgraph").directive("vgraphLoading",["$interval",function(a){"use strict";return{require:["^vgraphChart"],link:function(b,c,d,e){function f(){!o&&n.loading&&(r.attr("visibility","visible"),o=!0,a.cancel(j),h(),j=a(h,4005))}function g(){r.attr("visibility","hidden"),o=!1,a.cancel(j)}function h(){t.attr("x",function(){return k}).attr("width",function(){return 0}).transition().duration(1e3).attr("x",function(){return k}).attr("width",function(){return l}).ease("sine").transition().duration(1e3).attr("width",0).attr("x",function(){return m}).ease("sine").transition().duration(1e3).attr("width",function(){return l}).attr("x",function(){return k}).ease("sine").transition().duration(1e3).attr("x",function(){return k}).attr("width",0).ease("sine")}var i,j,k,l,m,n=e[0],o=!1,p=n.box,q=d.vgraphLoading||"Loading Data",r=d3.select(c[0]).attr("class","loading-view"),s=r.append("rect").attr("height",20).attr("class","outline"),t=r.append("rect").attr("width",0).attr("height",20).attr("class","filling"),u=r.append("text").text(q);p.register(function(){if(k=p.innerLeft+p.innerWidth/5,l=3*p.innerWidth/5,m=k+l,l){t.attr("x",k).attr("y",p.middle-10),s.attr("x",k).attr("y",p.middle-10).attr("width",l);try{u.attr("text-anchor","middle").attr("x",p.center).attr("y",p.middle+u.node().getBBox().height/2-2)}catch(a){u.attr("text-anchor","middle").attr("x",p.center).attr("y",p.middle)}f()}else g()}),f(),i=n.$subscribe({done:function(){g(),n.loading&&p.ratio&&f()},error:g}),b.$on("$destroy",function(){g(),i()})}}}]),angular.module("vgraph").directive("vgraphMessage",[function(){"use strict";return{require:["^vgraphChart"],link:function(a,b,c,d){var e,f=d[0],g=f.box,h=d3.select(b[0]).attr("class","error-view"),i=h.append("rect").attr("class","outline"),j=h.append("text");h.attr("visibility","hidden"),g.register(function(){if(g.innerHeight){i.attr("transform","translate("+g.innerLeft+","+g.innerTop+")").attr("width",g.innerWidth).attr("height",g.innerHeight);try{j.attr("text-anchor","middle").attr("x",g.center).attr("y",g.middle+j.node().getBBox().height/2)}catch(a){j.attr("text-anchor","middle").attr("x",g.center).attr("y",g.middle)}}}),e=f.$subscribe({error:function(){var a=f.message;a&&!f.loading&&(h.attr("visibility","visible"),j.text(a))},done:function(){h.attr("visibility","hidden")}})}}}]),angular.module("vgraph").directive("vgraphPage",["ComponentPage",function(a){"use strict";return{restrict:"A",scope:{settings:"=vgraphPage"},controller:a,require:["vgraphPage"],link:function(a,b,c,d){var e=d[0];a.$watch("settings",function(a){e.configure(a)})}}}]),angular.module("vgraph").directive("vgraphStack",["$compile","ComponentGenerator","StatCalculations","ComponentChart",function(a,b,c,d){"use strict";return{require:["^vgraphChart"],scope:{config:"=vgraphStack",feed:"=?feed"},link:function(e,f,g,h){function i(a){var b,c,d,f={};for(b=0,c=a.length;c>b;b++)d=a[b],d.$pos=b,d.feed||(d.feed=e.feed),d.ref||(d.ref={name:d.name,view:o}),d.pair=f,f=d.ref}function j(c){var d,g,h,j;if(k=[],n=[],c&&(i(c),p)){for(d3.select(f[0]).selectAll("g").remove(),m&&m.$destroy(),h="",d=0,g=c.length;g>d;d++)h+="<g "+p+'="config['+d+']"></g>';for(j=b.svgCompile(h),d=0,g=j.length;g>d;d++)f[0].appendChild(j[d]);m=e.$new(),a(j)(m)}}var k,l,m,n,o=g.view||d.defaultView,p=g.childTag,q=g.model||d.defaultModel,r=h[0],s=r.getView(o);e.$watchCollection("config",j),l=e.$watchCollection("config",j),e.$on("$destroy",function(){m.$destroy(),l()}),s.register({parse:function(a){var b=e.config;c.$resetCalcs(b),c.stack(b,a[q])}})}}}]),angular.module("vgraph").directive("vgraphTarget",[function(){"use strict";return{require:["^vgraphChart"],scope:{pointRadius:"=pointRadius",config:"=vgraphTarget"},link:function(a,b,c,d){function e(b){b?(f=b.pos.x,i.style("visibility","visible").attr("transform","translate("+f+",0)"),void 0===c.noDots&&angular.forEach(a.config,function(d){var e,h=g.getView(d.view),i=d.field,j=b[d.view][d.model],l=d.className,m=j[i];void 0!==m&&null!==m?(e=k.selectAll("circle.point."+l),e[0].length||(e=k.append("circle").attr("class","point "+l+" "+d.classExtend)),e.attr("cx",j._$interval-f).attr("cy",h.y.scale(m)).attr("r",a.$eval(c.pointRadius)||3)):k.selectAll("circle.point."+l).remove()})):i.style("visibility","hidden")}var f,g=d[0],h=g.box,i=d3.select(b[0]).attr("class","target"),j=i.append("line").attr("class","focus").attr("x1",0).attr("x2",0),k=i.append("g");i.style("visibility","hidden"),g.$on("highlight",e),h.register(function(){j.attr("y1",h.innerTop).attr("y2",h.innerBottom)})}}}]),angular.module("vgraph").directive("vgraphTooltip",[function(){"use strict";function a(a,c,d){var e=c.config;return d.reference?{formatter:function(a){return a[d.reference].value},xParse:function(a){return a[d.reference].x},yParse:function(a){return a[d.reference].y}}:e.formatter?e:b(a,e)}function b(a,b){return{formatter:function(a){return b.getValue(a[b.view][b.model])},xParse:function(a){return a[b.view][b.model]._$interval},yParse:function(c){return a.views[b.view].y.scale(b.getValue(c[b.view][b.model]))}}}return{require:["^vgraphChart"],scope:{config:"=?vgraphTooltip"},link:function(b,c,d,e){var f=e[0],g=a(f,b,d),h=parseInt(d.offsetX)||0,i=parseInt(d.offsetY)||0,j=d3.select(c[0]).attr("class","tooltip"),k=j.append("polygon").attr("class","outline").attr("transform","translate(0,-15)"),l=j.append("text").style("line-height","20").style("font-size","16").attr("class","label");f.$on("highlight",function(a){var b,c,d,e;a&&(d=g.yParse(a)),void 0!==d?(b=d+i,c=g.xParse(a)+h,l.text(g.formatter(a)),e=l.node().getComputedTextLength()+5,j.style("visibility","visible"),c+e+16<f.box.innerRight?(j.attr("transform","translate("+c+","+b+")"),l.attr("transform","translate(10,5)"),k.attr("points","0,15 10,0 "+(e+10)+",0 "+(e+10)+",30 10,30 0,15")):(j.attr("transform","translate("+(c-2*h-e-10)+","+b+")"),l.attr("transform","translate(5,5)"),k.attr("points","0,0 "+e+",0 "+(e+10)+",15 "+e+",30 0,30 0,0"))):j.style("visibility","hidden")})}}}]),angular.module("vgraph").directive("vgraphZoom",[function(){"use strict";return{scope:{min:"=zoomMin",max:"=zoomMax"},require:["^vgraphChart","^vgraphPage"],link:function(a,b,c,d){function e(b){0===g&&h===o.innerWidth?(r=!1,w.attr("class","focus")):(r=!0,w.attr("class","focus zoomed")),0>g&&(g=0),h>o.innerWidth&&(h=o.innerWidth),g>h?g=h:g>h&&(h=g),t.attr("transform","translate("+g+",0)"),u.attr("transform","translate(-"+g+",0 )").attr("width",g),x.attr("transform","translate("+h+",0)"),y.attr("width",o.innerWidth-h),w.attr("transform","translate("+g+",0)").attr("width",h-g),b||a.$apply(function(){p.setPane(g/o.innerWidth,h/o.innerWidth),p.rerender()})}var f,g,h,i,j,k,l,m=d[0],n=d[1],o=m.box,p=n.getChart(c.vgraphZoom),q=!1,r=!1,s=d3.select(b[0]),t=s.append("g").attr("class","left-control min-control"),u=t.append("rect").attr("class","shade"),v=t.append("g").attr("class","control"),w=s.append("rect").attr("class","focus"),x=s.append("g").attr("class","right-control max-control"),y=x.append("rect").attr("class","shade"),z=x.append("g").attr("class","control");j=v.append("path").attr("d","M-0.5,23.33A6,6 0 0 0 -6.5,29.33V40.66A6,6 0 0 0 -0.5,46.66ZM-2.5,31.33V38.66M-4.5,31.33V38.66").attr("transform","translate(0,-9)").attr("class","nub"),i=v.append("rect").attr("width","10").attr("transform","translate(-10,0)"),l=z.append("path").attr("d","M0.5,23.33A6,6 0 0 1 6.5,29.33V40.66A6,6 0 0 1 0.5,46.66ZM2.5,31.33V38.66M4.5,31.33V38.66").attr("transform","translate(0,-9)").attr("class","nub"),k=z.append("rect").attr("width","10"),a.box=o,i.call(d3.behavior.drag().on("dragstart",function(){q=!0}).on("dragend",function(){q=!1}).on("drag",function(){g=d3.mouse(b[0])[0],e()})),k.call(d3.behavior.drag().on("dragstart",function(){q=!0}).on("dragend",function(){q=!1}).on("drag",function(){h=d3.mouse(b[0])[0],e()})),w.call(d3.behavior.drag().on("dragstart",function(){f={mouse:d3.mouse(b[0])[0],minPos:g,maxPos:h},q=!0}).on("dragend",function(){q=!1,r=!0}).on("drag",function(){var a=d3.mouse(b[0]),c=a[0]-f.mouse;r?(h=f.maxPos+c,g=f.minPos+c,e()):c>1&&(h=f.mouse+Math.abs(c),g=f.mouse-Math.abs(c),e(),r=!1)})),s.on("dblclick",function(){h=o.innerWidth,g=0,e()}),o.register(function(){s.attr("width",o.innerWidth).attr("height",o.innerHeight).attr("transform","translate("+o.innerLeft+","+o.innerTop+")"),l.attr("transform","translate(0,"+(o.innerHeight/2-30)+")"),j.attr("transform","translate(0,"+(o.innerHeight/2-30)+")"),u.attr("height",o.innerHeight),y.attr("height",o.innerHeight),i.attr("height",o.innerHeight),k.attr("height",o.innerHeight),w.attr("height",o.innerHeight)}),p.$on("success",function(a){q||(a.offset?(g=a.offset.left*o.innerWidth,h=a.offset.right*o.innerWidth):(g=0,h=o.innerWidth),e(!0))})}}}]),function(a){"use strict";var b=/\S+/g,c=/[\t\r\n\f]/g;a&&(a.fn.addClass=function(d){var e,f,g,h,i,j,k,l="string"==typeof d&&d,m=0,n=this.length;if(a.isFunction(d))return this.each(function(b){a(this).addClass(d.call(this,b,this.className))});if(l)for(e=(d||"").match(b)||[];n>m;m++)if(f=this[m],k="string"!=typeof f.className,g=1===f.nodeType&&(f.className?(" "+(k?f.getAttribute("class")||"":f.className)+" ").replace(c," "):" ")){for(i=0;h=e[i++];)g.indexOf(" "+h+" ")<0&&(g+=h+" ");j=a.trim(g),f.className!==j&&(k?f.setAttribute("class",j):f.className=j)}return this},a.fn.removeClass=function(d){var e,f,g,h,i,j,k,l=0===arguments.length||"string"==typeof d&&d,m=0,n=this.length;if(a.isFunction(d))return this.each(function(b){a(this).removeClass(d.call(this,b,this.className))});if(l)for(e=(d||"").match(b)||[];n>m;m++)if(f=this[m],k="string"!=typeof f.className,g=1===f.nodeType&&(f.className?(" "+(k?f.getAttribute("class")||"":f.className)+" ").replace(c," "):"")){for(i=0;h=e[i++];)for(;g.indexOf(" "+h+" ")>=0;)g=g.replace(" "+h+" "," ");j=d?a.trim(g):"",f.className!==j&&(k?f.setAttribute("class",j):f.className=j)}return this})}(jQuery);
//# sourceMappingURL=vgraph.min.js.map