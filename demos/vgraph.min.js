angular.module("vgraph",[]),angular.module("vgraph").factory("BoxModel",[function(){"use strict";function t(t,e){var i=e.padding,a=t.padding,r=e.margin,o=t.margin;o||(t.margin=o={top:0,right:0,bottom:0,left:0}),r&&(o.top=n(r.top,o.top),o.right=n(r.right,o.right),o.bottom=n(r.bottom,o.bottom),o.left=n(r.left,o.left)),a||(t.padding=a={top:0,right:0,bottom:0,left:0}),i&&(a.top=n(i.top,a.top),a.right=n(i.right,a.right),a.bottom=n(i.bottom,a.bottom),a.left=n(i.left,a.left)),t.outerWidth=n(e.outerWidth,t.outerWidth)||0,t.outerHeight=n(e.outerHeight,t.outerHeight)||0,t.top=o.top,t.bottom=t.outerHeight-o.bottom,t.left=o.left,t.right=t.outerWidth-o.right,t.center=(t.left+t.right)/2,t.middle=(t.top+t.bottom)/2,t.width=t.right-t.left,t.height=t.bottom-t.top,t.innerTop=t.top+a.top,t.innerBottom=t.bottom-a.bottom,t.innerLeft=t.left+a.left,t.innerRight=t.right-a.right,t.innerWidth=t.innerRight-t.innerLeft,t.innerHeight=t.innerBottom-t.innerTop,t.ratio=t.outerWidth+" x "+t.outerHeight}function e(e){this.registrations=[],t(this,e||{})}function n(t,e){return void 0!==t?parseInt(t):e}return e.prototype.register=function(t){this.ratio&&t(),this.registrations.push(t)},e.prototype.targetSvg=function(t){this.$element=t,this.resize()},e.prototype.resize=function(){var e,n,i=this.$element;if(i.attr("width",null).attr("height",null),i[0].style.cssText=null,t(this,{outerWidth:i.outerWidth(!0),outerHeight:i.outerHeight(!0),margin:{top:i.css("margin-top"),right:i.css("margin-right"),bottom:i.css("margin-bottom"),left:i.css("margin-left")},padding:{top:i.css("padding-top"),right:i.css("padding-right"),bottom:i.css("padding-bottom"),left:i.css("padding-left")}}),i.css("margin","0").css("padding","0").attr("width",this.outerWidth).attr("height",this.outerHeight).css({width:this.outerWidth+"px",height:this.outerHeight+"px"}),this.innerWidth&&this.innerHeight)for(e=0,n=this.registrations.length;n>e;e++)this.registrations[e]()},e}]),angular.module("vgraph").factory("ComponentGenerator",["$timeout",function(t){"use strict";function e(t,e,n){var i,a;if(t)if(t.forEach)t.forEach(e,n);else if(t.length)for(i=0,a=t.length;a>i;i++)e.call(n,t[i],i)}function n(t,e,n,i){var a,r,o,s=e.name;return i||(i="path"),t[s]=e,a=angular.isFunction(e.value)?s+".value":"'"+(e.value||s)+"'",r=angular.isFunction(e.interval)?s+".interval":"'"+(e.interval||"x")+"'",angular.isString(e.data)?(o=e.data,t[e.data]=t.$parent[e.data]):o=e.data?s+".data":"data","<"+i+' class="'+n+" "+e.className+'" vgraph-feed="'+o+'" name="'+s+'" value="'+a+'" interval="'+r+'" control="'+(e.control||"default")+'"'+(e.filter?' filter="'+e.filter+'"':"")+"></"+i+">"}function i(t){return null===t?!1:Number.isFinite?Number.isFinite(t)&&!Number.isNaN(t):isFinite(t)&&!isNaN(t)}var a={require:["^vgraphChart"],scope:{data:"=_undefined_",value:"=?value",extra:"=?extra",filter:"=?filter",interval:"=?interval"},link:function(e,n,i,a){function r(){l||(l=t(function(){o(),l=null},30))}function o(){var t,n;if(e.data&&f.valueParse&&!e.data.$loading){for(e.data._lastRead||(e.data._lastRead={}),t=e.data._lastRead[g]||0,n=e.data.length;n>t;t++)e.loadPoint(e.data[t]);e.data._lastRead[g]=n}}var s,l,c=i.control||"default",h=a[0].graph,u=h.views[c],d=u.model,f={model:d},p=i.name,g=p+h.$uid,m=[],v=parseInt(i.memory,10)||10;e.$watch("interval",function(t){"string"==typeof t?f.intervalParse=function(e){return e[t]}:f.intervalParse=t}),e.$watch("extra",function(t){f.extraParse=t}),e.$watch("filter",function(t){f.filterParse=t}),e.$watch("value",function(t){"string"==typeof t?(s=i.alias||t,f.valueParse=function(e){return void 0!==e[t]?e[s]:void 0}):f.valueParse=t,r()}),e.$watch("data",r),e.$watch("data.$loading",r),e.$watch("data.length",r),e.loadPoint?e.loadPoint=e.loadPoint.bind(f):e.loadPoint=function(t){var e,n=this.valueParse(t);this.filterParse?(m.length>v&&m.shift(),m.push(n),e=this.model.addPoint(p,this.intervalParse(t),this.filterParse(n,m))):e=this.model.addPoint(p,this.intervalParse(t),n),this.extraParse&&e&&this.extraParse(t,e)}.bind(f),h.rerender()}};return{isNumeric:i,generate:function(t,e){function n(){}var i;return n.prototype=a,i=new n,i.scope=angular.copy(i.scope),i.scope.data="="+t,angular.forEach(e,function(t,e){var n=i[e];n?angular.isFunction(n)?i[e]=function(){n.apply(this,arguments),t.apply(this,arguments)}:i[e]=angular.extend(n,t):i[e]=t}),i.preLink&&(i.link={pre:i.preLink,post:i.link}),i},makeAreaCalc:function(t,e){return d3.svg.area().defined(function(t){return i(t[e])}).x(function(e){return t.x.scale(e.$interval)}).y(function(n){return t.y.scale(n[e+"$Min"])}).y1(function(n){return t.y.scale(n[e+"$Max"])})},makeLineCalc:function(t,e){var n,a,r=d3.svg.line().interpolate("linear").defined(function(t){var a=t[e];return i(a)?(n=!0,!0):void 0===a&&n?!0:(n=!1,!1)}).x(function(e){return t.x.scale(e.$interval)}).y(function(n){var i=n[e];return void 0!==i&&(a=t.y.scale(n[e])),a});return function(){return n=!1,a=!1,r.apply(this,arguments)}},makeFillCalc:function(t,e,n,a,r){return n||(n=t),d3.svg.area().defined(function(o){var s=o[t.name]?o[t.name][e]:null,l=!a||o[n.name]&&i(o[n.name][a]);return i(s)&&l?(r&&a&&r(o,o[t.name][e],o[n.name][a]),!0):!1}).x(function(e){return t.x.scale(e[t.name].$interval)}).y(function(n){return t.y.scale(n[t.name][e])}).y1(function(t){return n.y.scale(a?t[n.name][a]:n.model.y.minimum)})},makeMyFillCalc:function(t,n,a,r,o){function s(e){var o=e[t.name]?e[t.name][n]:null,s=!r||e[a.name]&&i(e[a.name][r]);return i(o)&&s?!0:!1}function l(e){return e[t.name]._$interval}function c(e){return e[t.name][n]}function h(e){return t.y.scale(e)}function u(t){return r&&t[a.name][r]?t[a.name][r]:a.pane.y.minimum}function d(t){return a.y.scale(t)}return a||(a=t),function(t){function n(){i.push("M",r.join("L"),"L",a.reverse().join("L"),"Z")}var i=[],a=[],r=[];return e(t,function(t){var e,i,f,p,g;s(t)?(i=c(t),f=u(t),p=h(i),g=h(f),e=l(t),o&&o(t,i,f,p,g,e),a.push(e+","+h(i)),r.push(e+","+d(f))):a.length&&(n(),a=[],r=[])}),a.length&&n(),i.length?i.join(""):null}},decodeConfig:function(t,e,i){var a,r,o=[];if(angular.isArray(e))for(a=0,r=e.length;r>a;a++)o.push(n(t,e[a],i,e[a]));else o.push(n(t,e,i));return o},compileConfig:function(t,e,n){var i,a,r,o,s,l;for(angular.isArray(s)||(s=[s]),r=this.decodeConfig(t,e,n),l=this.svgCompile(r.join("")),i=0,a=l.length;a>i;i++)s=e[i],o={name:s.name,className:s.className,element:l[i],$d3:d3.select(l[i]),$conf:s},r[i]=o;return r},svgCompile:function(t){return(new DOMParser).parseFromString('<g xmlns="http://www.w3.org/2000/svg">'+t+"</g>","image/svg+xml").childNodes[0].childNodes},parseStackedLimits:function(t,e){var n,i,a,r,o,s,l,c,h,u;if(e&&e.length)for(n=0,i=t.length;i>n;n++){for(s=0,c=void 0,l=t[n],o=e[0].name,c=l[o]||0,void 0===h?(h=c,u=c):h>c&&(h=c),l["$"+o]=c,s=c,a=1,r=e.length;r>a;a++)o=e[a].name,c=l[o]||0,s+=c,l["$"+o]=s;l.$total=s,s>u&&(u=s)}return{min:h,max:u}},parseSegmentedLimits:function(t,e,n,a){function r(t){t[e+"$Max"]=u,t[e+"$Min"]=h}var o,s,l,c,h,u,d={},f=[];if(a||(a=0),angular.isString(e)){for(n||(n=function(t,e){return e});a<t.length&&!i(n(t[a],t[a][e]));)a++;for(o=a,s=t.length;s>o;o++)l=t[o],c=n(l,l[e]),i(c)?(void 0===h?(h=c,u=c):h>c?h=c:c>u&&(u=c),f.push(l)):(f.forEach(r),d=this.parseSegmentedLimits(t,e,n,o+1),o=t.length);i(d.min)&&d.min<h&&(h=d.min),i(d.max)&&d.max>u&&(u=d.max)}else for(o=0,s=e.length;s>o;o++)c=this.parseSegmentedLimits(t,e[o],n),void 0===h?(h=c.min,u=c.max):(c.min<h&&(h=c.min),c.max>u&&(u=c.max));return console.log(h,u),{min:h,max:u}},parseLimits:function(t,e,n){var a,r,o,s,l,c;if(angular.isString(e))if(n)for(a=0,r=t.length;r>a;a++)o=t[a],s=n(o,o[e]),i(s)&&(void 0===l?(l=s,c=s):l>s?l=s:s>c&&(c=s));else for(a=0,r=t.length;r>a;a++)o=t[a],s=o[e],i(s)&&(void 0===l?(l=s,c=s):l>s?l=s:s>c&&(c=s));else for(a=0,r=e.length;r>a;a++)s=this.parseLimits(t,e[a]),void 0===l?(l=s.min,c=s.max):(s.min<l&&(l=s.min),s.max>c&&(c=s.max));return{min:l,max:c}}}}]),angular.module("vgraph").factory("DataCollection",["LinearModel",function(t){"use strict";function e(e){e instanceof t&&(e={"default":e}),this.models=e}return e.prototype.forEach=function(t,e){angular.forEach(this.models,function(n,i){t.call(e,n,i)})},e.prototype.reset=function(){angular.forEach(this.models,function(t){t.reset()})},e}]),angular.module("vgraph").factory("GraphModel",["$timeout","ViewModel","BoxModel","LinearModel","DataCollection",function(t,e,n,i,a){"use strict";function r(){this.$scripts={},this.$master=this.schedule=[]}function o(){return+new Date}function s(){this.index=[],this.hash={},this.$dirty=!1}function l(t){this.$uid=++d,this.box=new n,this.models=[],this.views={},this.samples={},this.waiting={},this.registrations=[],this.loading=!0,this.message=null,this.$interface=t||{}}function c(t,e){var n,i,a,r,o;for(i=0,a=t.length;a>i;i++)for(n=t[i],r=0,o=n.length;o>r;r++)null!==n[r]&&(e[i].unshift(n[r]),r=o)}function h(t,e,n,i,a){var r,o=[],s=[];for(r=0;a>r;r++)s.push([]);return s.push([]),angular.forEach(t,function(t){var r=e[t.view],l=n[r.name];o.push(t.label),r.publishData(s,t,function(t){return Math.round((t.$x-l.data.min)/i*a)})}),{header:o,body:s}}r.prototype.startScript=function(t){t?this.$scripts[t]?(this.schedule=this.$scripts[t],this.schedule.length=0):this.schedule=this.$scripts[t]=[]:this.schedule=[]},r.prototype.endScript=function(){this.$master.push(this.schedule),this.schedule=this.$master},r.prototype.loop=function(t,e,n){this.schedule.push({start:0,stop:t.length,data:t,op:e,ctx:n})},r.prototype.func=function(t,e){this.schedule.push({op:t,ctx:e})},r.prototype.run=function(t){var e=this;this.$lock||(this.$lock=!0,setTimeout(function(){e.$eval(function(){e.$lock=!1},t)},5))},r.prototype.$eval=function(t,e){function n(){s.$eval(t,e)}var i,a,r,s=this,l=!0,c=o(),h=c+500;try{for(;(r=this.schedule.shift())&&l;){if(r.length)for(;r.length;)this.schedule.unshift(r.pop());else if("start"in r)for(i=r.start,a=r.stop;a>i;i++)r.op.call(r.ctx,r.data[i],i);else r.op.call(r.ctx);o()>h&&(l=!1,setTimeout(n,5))}}catch(u){console.log(u),e()}0===this.schedule.length&&t()};var u=new r;s.prototype.addIndex=function(t,e){return this.hash[t]||(this.hash[t]={$index:t,$meta:e},this.index[this.index.length-1]>t&&(this.$dirty=!0),this.index.push(t),this.length=this.index.length),this.hash[t]},s.prototype.getClosest=function(t){var n,i,a,r,o;return this.length?(this.sort(),n=e.bisect(this,t,function(t){return t.$index},!0),r=this.get(n.left),o=this.get(n.right),i=t-r.$index,a=o.$index-t,a>i?r:o):void 0},s.prototype.get=function(t){return this.hash[this.index[t]]},s.prototype.sort=function(){this.$dirty&&(this.$dirty=!1,this.index.sort(function(t,e){return t-e}))},s.prototype.forEach=function(t,e){var n,i;for(this.sort(),n=0,i=this.index.length;i>n;n++)t.call(e,this.hash[this.index[n]])};var d=0;return l.prototype.register=function(t){this.registrations.push(t)},l.prototype.getPrimaryView=function(){return this.views[Object.keys(this.views)[0]]},l.prototype.publish=function(t,e){var n,i,a,r,o={},s={};return angular.forEach(t,function(t){var e=this.views[t.view];e&&!o[e.name]&&(o[e.name]=e)},this),angular.forEach(o,function(t){var e=t.publishStats(),i=e.data.max-e.data.min;s[t.name]=e,(!n||i>n)&&(n=i),(!a||e.step<a)&&(a=e.step)}),i=Math.ceil(n/a),r=h(t,o,s,n,i),e&&(e=h(e,o,s,n,i),c(e.body,r.body),r.header.unshift(e.header[0])),r.body.unshift(r.header),r.body},l.prototype.render=function(){var t,e=this,n=0,i=Object.keys(this.views).length,a=this.getPrimaryView(),r=new s;angular.forEach(this.views,function(t){t.calcBounds()}),this.calcHook&&this.calcHook(),t=[],this.empty=[],angular.forEach(this.views,function(e){e.calcScales(r),e.hasData()?t.push(e):this.empty.push(e)},this),n=Object.keys(t).length,u.startScript(this.$uid),i?n?(u.startScript(this.$uid),e.loading=!r.length,u.func(function(){e.unified=r,e.message=null}),r.length?(u.loop(t,function(t){t.build()}),u.loop(t,function(t){t.process()}),u.loop(t,function(t){t.finalize()}),u.loop(this.registrations,function(t){t(a.pane)}),u.func(function(){e.loading=!1,e.pristine=!0})):(u.loop(t,function(t){t.loading()}),u.func(function(){e.loading=!0,e.pristine=!1}))):this.loading?(u.loop(this.views,function(t){t.error()}),u.func(function(){e.pristine=!1})):(u.loop(this.views,function(t){t.error()}),u.func(function(){e.message="No Data Available",e.pristine=!1})):u.func(function(){e.loading=!0,e.pristine=!1}),u.func(function(){e.$interface.onRender&&e.$interface.onRender()}),u.endScript(),u.run(function(){e.pristine=!1,e.message="Unable to Render"})},l.prototype.scheduleRender=function(){this.nrTimeout||(this.nrTimeout=t(function(){this.render(this.waiting),this.waiting={},this.nrTimeout=null}.bind(this),30))},l.prototype.rerender=function(){this.scheduleRender(),this.waiting=this.views},l.prototype.needsRender=function(t){this.scheduleRender(),this.waiting[t.name]||(this.waiting[t.name]=t)},l.prototype.addDataCollection=function(t){t instanceof a?t=t.models:t instanceof i&&(t={"default":t}),angular.forEach(t,this.addDataModel,this)},l.prototype.addDataModel=function(t,n){var i=new e(this,n,t);this.views[i.name]=i,this.models.push(t),this.bounds&&i.pane.setBounds(this.bounds.x,this.bounds.y),this.pane&&i.pane.setPane(this.pane.x,this.pane.y),t.onError(function(t){t?(this.loading=!1,this.message=t):this.message=null}.bind(this))},l.prototype.setBounds=function(t,e,n){return this.bounds={x:t,y:e},n?this.views[n]&&this.views[n].pane.setBounds(t,e):angular.forEach(this.views,function(n){n.pane.setBounds(t,e)}),this},l.prototype.setPane=function(t,e,n){return this.pane={x:t,y:e},n?this.views[n]&&this.views[n].pane.setPane(t,e):angular.forEach(this.views,function(n){n.pane.setPane(t,e)}),this},l}]),angular.module("vgraph").factory("LinearModel",[function(){"use strict";function t(t){t||(t={}),t.x||(t.x={}),t.y||(t.y={}),this.$dataProc=e(20,200,function(t){var e=t.registrations;e.forEach(function(t){t()})}),this.data=[],this.construct(),this.reset(t)}function e(t,e,n,i){function a(){var e=+new Date;e>s||e>o?(s=null,n.apply(i,r)):setTimeout(a,t)}var r,o,s;return function(){var n=+new Date;o=n+t,r=arguments,s||(s=n+e,setTimeout(a,t))}}var n=0;return t.prototype.construct=function(){this.$modelId=n++,this.registrations=[],this.errorRegistrations=[],this.point={reset:function(t){t.$x=null,t.$y=null}}},t.prototype.reset=function(t){this.data.length=0,this.lookUp={},this.plots={},this.plotNames=[],this.filtered=null,this.needSort=!1,this.ratio=null,this.transitionDuration=30,this.config(t||this),this.dataReady(!0)},t.prototype.config=function(t){var e=this;this.x={$min:null,$max:null,massage:t.x.massage||null,padding:t.x.padding||0,scale:t.x.scale||function(){return d3.scale.linear()},disp:t.x.display||function(t){return t.$interval},simplify:t.x.simplify||function(t){return t.$x},parse:t.x.parse||function(t){return t.$interval},format:t.x.format||d3.format("03d"),tick:t.x.tick||{}},this.y={$min:null,$max:null,massage:t.y.massage||null,padding:t.y.padding||0,scale:t.y.scale||function(){return d3.scale.linear()},disp:t.y.display||function(t,n){return e.y.parse(t,n)},simplify:t.y.simplify||function(t){return e.y.parse(t)},parse:t.y.parse||function(t,e){return void 0===t||null===t?null:t[e]},format:t.y.format||d3.format(",.2f"),tick:t.y.tick||{}}},t.prototype.makeInterval=function(t){return t},t.prototype.onError=function(t){this.errorRegistrations.push(t)},t.prototype.setError=function(t){var e,n;for(e=0,n=this.errorRegistrations.length;n>e;e++)this.errorRegistrations[e](t)},t.prototype.getPoint=function(t){var e,n=this.data;return this.x.massage&&(t=this.x.massage(t)),t||0===t?(t=+t,e=this.lookUp[t],e||(e={$interval:this.makeInterval(t),$x:t},this.lookUp[t]=e,n.length&&n[n.length-1].$x>t&&(this.needSort=!0),n.push(e)),e):void 0},t.prototype.addPoint=function(t,e,n){var i,a=this.getPoint(e),r=parseFloat(n);if(a)return e=a.$x,this.y.massage&&(n=this.y.massage(e)),void 0===a.$max?isFinite(r)&&(a.$min=r,a.$max=r):isFinite(r)&&((void 0===a.$min||r<a.$min)&&(a.$min=r),(void 0===a.$max||r>a.$max)&&(a.$max=r)),this.x.min||(this.x.min=a,this.x.max=a),i=this.plots[t],i?i.x.max.$x<a.$x?(i.x.max=a,this.x.max.$x<a.$x&&(this.x.max=a)):i.x.min.$x>a.$x&&(i.x.min=a,a.$x<this.x.min.$x&&(this.x.min=a)):(this.plots[t]=i={x:{min:a,max:a}},this.x.max.$x<a.$x?this.x.max=a:a.$x<this.x.min.$x&&(this.x.min=a)),a[t]=n,this.dataReady(),a},t.prototype.addPlot=function(t,e,n,i){var a,r,o;if(!this.plots[t])for(a=0,r=e.length;r>a;a++)o=e[a],this.addPoint(t,n(o),i(o))},t.prototype.removePlot=function(t){var e,n,i,a,r,o,s,l,c=this.plots[t];if(c){for(delete this.plots[t],s=Object.keys(this.plots),e=0,n=this.data.length;n>e;e++){if(l=this.data[e],l.$max===l[t]){for(r=void 0,i=0,a=s.length;a>i;i++)o=l[s[i]],"number"==typeof o&&(void 0===r||o>r)&&(r=o);l.$max=r}if(l.$min===l[t]){for(r=void 0,i=0,a=s.length;a>i;i++)o=l[s[i]],"number"==typeof o&&(void 0===r||r>o)&&(r=o);l.$min=r}l[t]=null}if(this.x.min=null,this.x.max=null,this.y.min=null,this.y.max=null,s.length&&this.plots[s[0]]&&this.plots[s[0]].x&&this.plots[s[0]].y)for(this.x.min=this.plots[s[0]].x.min,this.x.max=this.plots[s[0]].x.max,this.y.min=this.plots[s[0]].y.min,this.y.max=this.plots[s[0]].y.max,e=1,n=s.length;n>e;e++)o=s[e],l=this.plots[o],l.min&&l.min.$x<this.x.min.$x?this.x.min=l.min:l.max&&this.x.max.$x<l.max.$x&&(this.x.max=l.max),l.min&&l.min.$min<this.y.min.$min?this.y.min=l.min:l.max&&this.y.max.$max<l.max.$max&&(this.y.max=l.max)}},t.prototype.dataReady=function(t){var e=this.registrations;t?e.forEach(function(t){t()}):this.$dataProc(this)},t.prototype.findExtemesY=function(t){var e,n,i,a,r;for(n=0,i=t.length;i>n;n++)e=t[n],(e.$min||0===e.$min)&&(void 0===a?a=e:e.$min<a.$min&&(a=e)),(e.$max||0===e.$max)&&(void 0===r?r=e:e.$max>r.$max&&(r=e));return{min:a,max:r}},t.prototype.register=function(t){this.registrations.push(t)},t.prototype.clean=function(){var t=this.x;this.needSort&&this.data.sort(function(t,e){return t.$x-e.$x}),t.min&&(t.$min=t.min.$x,t.$max=t.max.$x)},t}]),angular.module("vgraph").factory("PaneModel",[function(){"use strict";function t(t){this.dataModel=t,this.x={},this.y={},this._bounds={},this._pane={}}return t.prototype.setBounds=function(t,e){return this._bounds.x=t,this._bounds.y=e,this},t.prototype.setPane=function(t,e){return this._pane.x=t,this._pane.y=e,this},t.prototype.isValid=function(t){var e;return void 0===this.x.start?!0:(e=t.$x,this.x.start.$x<=e&&e<=this.x.stop.$x)},t.prototype.adjust=function(t){var e,n,i,a,r,o,s=this.dataModel.data,l=this.dataModel.x,c=this.x;if(s.length){if(this.dataModel.clean(),this._bounds.x?(r=this._bounds.x.min||l.$min,o=this._bounds.x.max||l.$max,c.$min=r,c.$max=o,this._bounds.x=null):(r=c.$min||l.$min,o=c.$max||l.$max),this._pane.x){if(a=this._pane.x,this.offset={},"number"==typeof a.start)c.start=s[a.start];else{if(a.start?"string"==typeof a.start&&("%"===a.start.charAt(0)?e=r+parseFloat(a.start.substring(1),10)*(o-r):"+"===a.start.charAt(0)?e=r+parseInt(a.start.substring(1),10):"="===a.start.charAt(0)&&(e=parseInt(a.start.substring(1),10))):e=r,void 0===e)throw"Start of pane not properly defined";c.start=t.makePoint(e,l.$min,l.$max,this.dataModel.makeInterval)}if(this.offset.$left=c.start.$x,this.offset.left=(c.start.$x-r)/(o-r),"number"==typeof a.stop)a.stop=s[a.stop];else{if(null===a.stop||void 0===a.stop?e=o:"string"==typeof a.stop&&("%"===a.stop.charAt(0)?e=r+parseFloat(a.stop.substring(1),10)*(o-r):"+"===a.stop.charAt(0)?e=r+parseInt(a.stop.substring(1),10):"="===a.stop.charAt(0)&&(e=parseInt(a.stop.substring(1),10))),void 0===e)throw"End of pane not properly defined";c.stop=t.makePoint(e,l.min.$x,l.max.$x,this.dataModel.makeInterval)}this.offset.$right=c.stop.$x,this.offset.right=(c.stop.$x-r)/(o-r)}else c.start||(c.start=t.makePoint(r,l.$min,l.$max,this.dataModel.makeInterval),c.stop=t.makePoint(o,l.min.$x,l.max.$x,this.dataModel.makeInterval));this.data=s,this.filtered=s.filter(function(t,e){var a=t.$x;return c.start.$x<=a&&a<=c.stop.$x?(n?i=e:n=e,t.$inPane=!0,!0):(t.$inPane=!1,!1)}),this.filtered.$first=n,this.filtered.$last=i,this.dataModel.fitToPane&&(c.start.$faux&&this.filtered.unshift(c.start),c.stop.$faux&&this.filtered.push(c.stop)),this.x.min=this.dataModel.x.min,this.x.max=this.dataModel.x.max,this.y={start:this.dataModel.y.start,stop:this.dataModel.y.stop,padding:this.dataModel.y.padding}}else this.filtered=[]},t}]),angular.module("vgraph").factory("ViewModel",["PaneModel",function(t){"use strict";function e(t,e,n,i){var a,r,o,s=0,l=t.length-1;if(o=t.get?function(e){return t.get(e)}:function(e){return t[e]},i||t.sort(function(t,e){return n(t)-n(e)}),n(o(s))>=e)return{left:s,right:s};if(n(o(l))<=e)return{left:l,right:l};if(t.length){for(;l-s>1;)a=Math.floor((l+s)/2),r=n(o(a)),r===e?(l=a,s=a):r>e?l=a:s=a;return l!==a&&n(o(l))===e?{left:l,right:l}:s!==a&&n(o(s))===e?{left:s,right:s}:{left:s,right:l}}}function n(t,n){return e(t,n,function(t){return t.$interval},!0)}function i(t,e){var i,a,r;return t.length?(i=n(t,e),a=e-t[i.left].$interval,r=t[i.right].$interval-e,t[r>a?i.left:i.right]):void 0}function a(e,n,i){var a,r,o=this;this.pane=new t(i),this.components=[],this.name=n,this.model=i,this.graph=e,a={scale:i.x.scale(),calc:function(t){return a.scale(i.x.parse(t))},center:function(){return(a.calc(o.pane.x.min)+a.calc(o.pane.x.max))/2}},this.x=a,r={scale:i.y.scale(),calc:function(t){return r.scale(i.y.parse(t))},center:function(){return(r.calc(o.pane.y.min)+r.calc(o.pane.y.max))/2}},this.y=r,i.register(function(){e.needsRender(this)}.bind(this))}function r(t,e,n,i){for(;n>e;)t[e].push(i),e++}function o(t,e,n,i,a){var o,s,l,c,h=0;for(o=0,s=t.length;s>o;o++)l=t[o][e],void 0!==l&&null!==l&&(c=i(t[o]),c!==h&&r(n,h,c,null),a&&(l=a(l)),n[c].push(l),h=c+1);r(n,h,n.length,null)}return a.bisect=e,a.prototype.getPoint=function(t){return this.model.data[t]?this.model.data[t]:0>t?this.model.data[0]:this.model.data[this.model.data.length]},a.prototype.getOffsetPoint=function(t){var e=Math.round(this.model.data.length*t);return this.getPoint(e)},a.prototype.makePoint=function(t,e,i,a){var r,o,s,l,c,h=this.model.data;if(t>e&&i>t){if(r=n(h,t),r.right===r.left)return h[r.right];o=h[r.right],s=h[r.left],l={},c=(t-s.$x)/(o.$x-s.$x),Object.keys(o).forEach(function(t){var e=s[t],n=o[t];void 0!==e&&null!==e&&void 0!==n&&null!==n&&(l[t]=e+(n-e)*c)}),l.$faux=!0}else l={$x:t};return l.$interval=a?a(l.$x):l.$x,l},a.prototype.getClosest=function(t,e){return i(e||this.model.data,t)},a.prototype.getSampledClosest=function(t){return this.getClosest(t,this.sampledData)},a.prototype.register=function(t){this.components.push(t)},a.prototype.hasData=function(){var t=this.pane.y.minimum,e=this.pane.y.maximum;return(t||0===t)&&(e||0===e)},a.prototype.calcBounds=function(){var t,e,n,i,a,r=this.graph.box,o=this.pane;o.adjust(this),e=parseInt(o.filtered.length/r.innerWidth)||1,a=o.filtered.filter(function(n,i){return o.x.start===n||o.x.stop===n||i%e===0?(t=n,n.$sampled=n,!0):(n.$sampled=t,!1)}),this.graph.samples[this.name]=a,this.components.forEach(function(t){var e;t.parse&&(e=t.parse(a,o.filtered),e&&(null!==e.min&&(!n&&0!==n||n>e.min)&&(n=e.min),null!==e.max&&(!i&&0!==i||i<e.max)&&(i=e.max)))}),o.y.top=i,o.y.bottom=n,o.y.minimum=n,o.y.maximum=i,this.sampledData=a},a.prototype.calcScales=function(t){var e,n=this.pane,i=this.graph.box,a=n.y.minimum,r=n.y.maximum;n.y.padding&&(e=r===a?a*n.y.padding:(r-a)*n.y.padding,r+=e,a-=e,n.y.minimum=a,n.y.maximum=r),n.x.start?(this.model.adjustSettings&&this.model.adjustSettings(n.x.stop.$interval-n.x.start.$interval,r-a,n.filtered.$last-n.filtered.$first),this.x.scale.domain([n.x.start.$interval,n.x.stop.$interval]).range([i.innerLeft,i.innerRight]),this.y.scale.domain([a,r]).range([i.innerBottom,i.innerTop]),this.sampledData.forEach(function(e){var n=this.x.scale(e.$interval);e._$interval=n,t.addIndex(Math.floor(n),e.$interval)[this.name]=e},this)):this.sampledData=[]},a.prototype.build=function(){var t=this.pane,e=this.sampledData;this.components.forEach(function(n){n.build&&n.build(t,e,t.filtered,t.data)})},a.prototype.process=function(){var t=this.pane,e=this.sampledData;this.components.forEach(function(n){n.process&&n.process(t,e,t.filtered,t.data)})},a.prototype.finalize=function(){var t=this.pane,e=this.sampledData;this.components.forEach(function(n){n.finalize&&n.finalize(t,e,t.filtered,t.data)})},a.prototype.loading=function(){this.components.forEach(function(t){t.loading&&t.loading()})},a.prototype.error=function(){this.components.forEach(function(t){t.error&&t.error()})},a.prototype.publishStats=function(){var t,e,n=this.model.data,i=this.pane.x.$max||9007199254740991,a=n.length;for(t=1;a>t;t++)e=n[t].$x-n[t-1].$x,i>e&&(i=e);return{step:i,count:n.length,bound:{min:this.pane.x.$min,max:this.pane.x.$max},data:{min:this.model.x.$min,max:this.model.x.$max}}},a.prototype.publishData=function(t,e,n){o(this.model.data,e.name,t,n,e.format)},a}]),angular.module("vgraph").directive("vgraphArea",["$compile","ComponentGenerator",function(t,e){"use strict";var n=0;return{require:["^vgraphChart"],scope:{data:"=vgraphArea",config:"=config"},link:function(i,a,r,o){function s(n){var a,r,o,s,h,f;if(c=[],n){for(d3.select(m).selectAll("path").remove();g.length;)g.pop().$destroy();for(h=e.compileConfig(i,n,"line"),p={},r=0,o=h.length;o>r;r++)f=h[r],s=d.views[f.$conf.control||u],p[s.name]||(p[s.name]=[],l(s)),p[s.name].push(f),m.appendChild(f.element),f.calc=e.makeAreaCalc(s,f.name),a=i.$new(),g.push(a),t(f.element)(a)}}function l(t){f[t.name]||(f[t.name]=t,t.register({parse:function(n){var i,a,r=[],o=p[t.name];if(o)for(i=0,a=o.length;a>i;i++)r.push(o[i].name);return console.log("--parse--",n),e.parseSegmentedLimits(n,r)},finalize:function(e,n){var i,a,r,o=p[t.name];if(o)for(i=0,a=o.length;a>i;i++)r=o[i],r.$d3.attr("d",r.calc(n))}}))}var c,h,u=r.control||"default",d=o[0].graph,f={},p={},g=[],m=a[0],v=n++;m.$id=v,h=i.$watchCollection("config",s),i.$on("$destroy",function(){for(;g.length;)g.pop().$destroy();h()})}}}]),angular.module("vgraph").directive("vgraphAxis",[function(){"use strict";function t(t,e){return!(t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}return{scope:{orient:"=vgraphAxis",adjust:"=axisAdjust",rotation:"=tickRotation"},require:["^vgraphChart"],link:function(e,n,i,a){var r,o,s,l,c,h,u,d,f,p,g,m=i.control||"default",v=a[0].graph,x=v.views[m],y=d3.svg.axis(),$="axis",b=v.box,w=x.model,k=0,C=null,P=!0,M=!1,L=parseInt(i.tickLength)||0,N=parseInt(i.tickPadding)||3,S=parseInt(i.tickMargin)||0,A=d3.select(n[0]);switch(A.attr("visibility","hidden"),h=A.append("g").attr("class","ticks"),p=A.append("g").attr("class","padding"),u=p.append("g").attr("class","tick-marks"),d=p.append("rect").attr("class","tick-margin"),g=A.append("g").attr("class","label-wrap"),i.tickRotation&&(C=parseInt(i.tickRotation,10)%360),i.labelOffset&&(k=e.$eval(i.labelOffset)),i.labelClean&&(P=e.$eval(i.labelClean)),i.labelEndpoints&&(M=e.$eval(i.labelEndpoints)),i.axisLabel&&(f=g.append("text").attr("class","axis-label label"),e.$parent.$watch(i.axisLabel,function(t){f.text(t)})),r=function(){i.tickMarks?(y.tickValues(e.$eval(i.tickMarks)),s=[]):i.tickCount?(y.ticks(e.$eval(i.tickCount)),s=[]):(y.ticks(10),s=[])},e.orient){case"top":o=function(){var t;A.attr("class",$+" x top").attr("transform","translate("+b.left+","+(b.top-L)+")").attr("width",b.width).attr("height",b.padding.top),f&&f.attr("text-anchor","middle").attr("x",b.width/2).attr("y",b.padding.top-k),S&&d.attr("height",S).attr("width",b.innerWidth).attr("x",0).attr("y",-S),u.attr("transform","translate(-"+b.margin.left+",0)"),s&&(y.orient("top").tickFormat(w.x.format).innerTickSize(-(b.innerHeight+L+S)).outerTickSize(0).tickPadding(N+L+S).scale(x.x.scale),w.x.tick.interval&&y.ticks(w.x.tick.interval,w.x.tick.step),h.attr("transform","translate(-"+b.margin.left+","+b.padding.top+")").call(y),t=A.selectAll("g.axis-cap").data(x.x.scale.domain()),M&&(t.enter().append("g").attr("class",function(t,e){return"axis-cap "+(e?"axis-max":"axis-min")}).append("text"),t.exit().remove(),t.attr("transform",function(t){return"translate("+(x.x.scale(t)-b.margin.left)+",0)"}).select("text").text(function(t){var e=w.x.format(t);return(""+e).match("NaN")?"":e}).attr("dy","-0.25em").attr("y",b.padding.top).attr("text-anchor","middle")),C&&(h.selectAll(".tick text").attr("transform","translate(0,"+h.select(".tick text").attr("y")+") rotate("+C+",0,0)").attr("y","0").style("text-anchor",C%360>0?"end":"start"),t.select("text").attr("transform","rotate("+C+",0,0)").style("text-anchor",e.rotation%360>0?"end":"start")))};break;case"bottom":o=function(){var t;A.attr("class",$+" x bottom").attr("transform","translate("+b.left+","+b.innerBottom+")").attr("width",b.width).attr("height",b.padding.bottom),f&&f.attr("text-anchor","middle").attr("x",b.width/2).attr("y",b.padding.bottom+k),S&&d.attr("height",S).attr("width",b.innerWidth).attr("x",0).attr("y",0),u.attr("transform","translate(-"+b.margin.left+",0)"),s&&(y.orient("bottom").tickFormat(w.x.format).innerTickSize(b.innerHeight+L+S).outerTickSize(0).tickPadding(N+L+S).scale(x.x.scale),w.x.tick.interval&&y.ticks(w.x.tick.interval,w.x.tick.step),h.attr("transform","translate(-"+b.margin.left+","+-b.innerHeight+")").call(y),t=A.selectAll("g.axis-cap").data(x.x.scale.domain()),M&&(t.enter().append("g").attr("class",function(t,e){return"axis-cap "+(e?"axis-max":"axis-min")}).append("text"),t.exit().remove(),t.attr("transform",function(t){return"translate("+(x.x.scale(t)-b.margin.left)+",0)"}).select("text").text(function(t){var e=w.x.format(t);return(""+e).match("NaN")?"":e}).attr("dy","1em").attr("y",0).attr("text-anchor","middle")),C&&(h.selectAll(".tick text").attr("transform",function(){return"translate(0,"+d3.select(this).attr("y")+") rotate("+C+",0,0)"}).attr("y","0").style("text-anchor",C%360>0?"start":"end"),t.select("text").attr("transform","rotate("+C+",0,0)").style("text-anchor",e.rotation%360>0?"start":"end")))};break;case"right":o=function(){var t;A.attr("class",$+" y right").attr("transform","translate("+L+","+b.top+")").attr("width",b.padding.right).attr("height",b.height),g.attr("transform","translate("+(b.right-b.padding.right)+","+b.height+") rotate( 90 )"),f&&f.attr("text-anchor","middle").attr("x",-(b.height/2)).attr("y",-k),S&&d.attr("height",b.innerHeight).attr("width",S).attr("x",-S).attr("y",0),u.attr("transform","translate(-"+b.padding.right+","+(-b.top||0)+")"),s&&(y.orient("right").tickFormat(w.y.format).innerTickSize(-(b.innerWidth+L+S)).outerTickSize(0).tickPadding(N+L+S).scale(x.y.scale),w.y.tick.interval&&y.ticks(w.y.tick.interval,w.y.tick.step),h.attr("transform","translate("+b.innerRight+","+(-b.top||0)+")"),h.call(y),h.select(".domain").attr("transform","translate("+(L+S)+",0)"),M&&(t=A.selectAll("g.axis-cap").data(x.y.scale.domain()),t.enter().append("g").attr("class",function(t,e){return"axis-cap "+(e?"axis-max":"axis-min")}).append("text"),t.exit().remove(),t.attr("transform",function(t){return"translate(0,"+(x.y.scale(t)-b.margin.top)+")"}).select("text").text(function(t){var e=w.y.format(t);return(""+e).match("NaN")?"":e}).attr("dy",".25em").attr("x",b.padding.left-y.tickPadding()).attr("text-anchor","end")))};break;case"left":o=function(){var t;A.attr("class",$+" y left").attr("transform","translate("+b.left+","+b.top+")").attr("width",b.padding.left).attr("height",b.height),g.attr("transform","translate("+b.padding.left+","+b.height+") rotate( -90 )"),f&&f.attr("text-anchor","middle").attr("x",b.height/2).attr("y",-k),S&&d.attr("height",b.innerHeight).attr("width",S).attr("x",-S).attr("y",0),u.attr("transform","translate("+b.padding.left+","+(-b.top||0)+")"),s&&(y.orient("left").tickFormat(w.y.format).innerTickSize(-(b.innerWidth+L+S)).outerTickSize(0).tickPadding(N+L+S).scale(x.y.scale),w.y.tick.interval&&y.ticks(w.y.tick.interval,w.y.tick.step),h.attr("transform","translate("+(b.padding.left-L-S)+","+(-b.top||0)+")").call(y),h.select(".domain").attr("transform","translate("+(L+S)+",0)"),M&&(t=A.selectAll("g.axis-cap").data(x.y.scale.domain()),t.enter().append("g").attr("class",function(t,e){return"axis-cap "+(e?"axis-max":"axis-min");
}).append("text"),t.exit().remove(),t.attr("transform",function(t){return"translate(0,"+(x.y.scale(t)-b.margin.top)+")"}).select("text").text(function(t){var e=w.y.format(t);return(""+e).match("NaN")?"":e}).attr("dy",".25em").attr("x",b.padding.left-y.tickPadding()).attr("text-anchor","end")))}}x.register({build:function(){void 0===s&&r(),o()},process:function(){s.length=0,L&&(h.selectAll(".tick text").each(function(t){s.push({el:this,val:t,position:this.getBoundingClientRect()})}),s.sort(function(t,e){var n=t.position.top-e.position.top;return n?n:t.position.left-e.position.left})),P&&(l=A.select(".axis-min text").node(),l&&(l=l.getBoundingClientRect()),c=A.select(".axis-max text").node(),c&&(c=c.getBoundingClientRect()))},loading:function(){A.attr("visibility","hidden")},finalize:function(e,n){var i,a,r,o,h,d,f={};if(!n.length)return void A.attr("visibility","hidden");for(A.attr("visibility",""),u.selectAll("line").remove(),o=0,h=s.length;h>o;o++)i=!0,a=s[o],r=a.position,P&&l&&(t(r,l)||t(r,c))?(a.el.setAttribute("class","collided"),i=!1):void 0===f.left?(f.left=r.left,f.right=r.right,f.width=r.width,f.top=r.top,f.bottom=r.bottom,f.height=r.height,a.el.setAttribute("class","")):P&&t(r,f)?(a.el.setAttribute("class","collided"),i=!1):(d=!1,r.left<f.left&&(f.left=r.left,d=!0),r.right>f.right&&(f.right=r.right,d=!0),d&&(f.width=f.right-f.left,d=!1),r.top<f.top&&(f.top=r.top,d=!0),r.bottom>f.bottom&&(f.bottom=r.bottom,d=!0),d&&(f.height=f.bottom-f.top),a.el.setAttribute("class",""))}},"axis-"+e.orient)}}}]),angular.module("vgraph").directive("vgraphBar",["$compile","ComponentGenerator",function(t,e){"use strict";return{require:["^vgraphChart"],scope:{data:"=?vgraphBar",config:"=config"},link:function(n,i,a,r){function o(i){var a,r,o,s;if(i){for(d3.select(f).selectAll("path").remove(),l=e.compileConfig(n,i,"line");d.length;)d.pop().$destroy();for(r=0,o=l.length;o>r;r++)s=l[r],s.$valueField="$"+s.name,r?(f.insertBefore(s.element,l[r-1].element),s.$bottom=l[r-1].$valueField,s.calc=e.makeLineCalc(u,s.$valueField,s.$bottom)):(f.appendChild(s.element),s.calc=e.makeLineCalc(u,s.$valueField)),a=n.$new(),d.push(a),t(s.element)(a)}}function s(t,e,n,i){var a,r,o,s,c,d,f,v,x,y,$,b,w,k,C,P;for(c=e;n>c;c++)x=t[c],x&&(x.$els=[]);for(o=0,s=l.length;s>o;o++){for(f=l[o],P=l[o].$valueField,d=0,v=0,c=e,r=[];n>c;)x=t[c],x&&void 0!==x[P]&&(d+=x[P],v++,y=x),c++;if(d){for(b=u.y.scale(d/v),void 0===w&&(t[e]===y?(w=y._$interval-p/2,k=w+p):(w=t[e]._$interval+g,k=y._$interval-g),w<h.box.innerLeft?w=h.box.innerLeft:t[e-1]&&t[e-1]._$interval>w&&(w=t[e-1]._$interval+g),k>h.box.innerRight?k=h.box.innerRight:t[c]&&t[c]._$interval<k&&(k=t[c]._$interval-g),w>k&&(C=w,w=k,k=C),C=k-w),void 0===$?a=m.append("rect").attr("height",u.y.scale(i.y.minimum)-b):(a=m.append("rect"),$>b&&a.attr("height",$-b)),a.attr("class","bar "+f.className).attr("y",b).attr("x",w).attr("width",C),a=a[0][0],c=e;n>c;c++)x=t[c],x&&(x.$els.push(a),x.$bar={center:(w+k)/2,top:d/v});$=b}}}var l,c=a.control||"default",h=r[0].graph,u=h.views[c],d=[],f=i[0],p=parseInt(a.minWidth||1),g=parseInt(a.padding||1),m=d3.select(f).append("g").attr("class","mount");n.$watchCollection("config",o),u.register({parse:function(t){return e.parseStackedLimits(t,l)},build:function(t,e){var n,i,a=0,r=u.x.scale(t.x.min.$interval),o=u.x.scale(t.x.max.$interval),l=o-r,c=g+p,h=l/c,d=e.length/h;for(m.selectAll("rect").remove(),1>d&&(d=1),n=0,i=e.length;i>n;n=Math.floor(a))a+=d,s(e,n,a,t)},finalize:function(t,e){var n,i,a;for(n=0,i=l.length;i>n;n++)a=l[n],a.$d3.attr("d",a.calc(e))}})}}}]),angular.module("vgraph").directive("vgraphChart",[function(){"use strict";function t(t,e){e&&(t.$mat=d3.select(e).insert("rect",":first-child"),t.$frame=d3.select(e).insert("rect",":first-child")),t.$mat&&t.innerWidth&&(t.$mat.attr("class","mat").attr("width",t.innerWidth).attr("height",t.innerHeight).attr("transform","translate("+t.innerLeft+","+t.innerTop+")"),t.$frame.attr("class","frame").attr("width",t.width).attr("height",t.height).attr("transform","translate("+t.left+","+t.top+")"))}return{scope:{graph:"=vgraphChart",model:"=model"},controller:["$scope",function(e){var n=e.model,i=e.graph;this.graph=i,i.addDataCollection(n),i.box.register(function(){t(i.box),i.rerender()})}],require:["vgraphChart"],link:function(e,n,i,a){var r=a[0].graph;r.box.targetSvg(n),t(r.box,n[0]),e.$watch("model.loading",function(t){t?n.addClass("loading"):n.removeClass("loading")}),e.$watch("model.error",function(t){t?n.addClass("hasError"):n.removeClass("hasError")})},restrict:"A"}}]),angular.module("vgraph").directive("vgraphClassifier",["ComponentGenerator",function(t){"use strict";function e(t,e,n){var i,a;for(i=n.length-1;i>=0;i--)a=n[i],a.$els.length&&(e(a)?$(a.$els).addClass(t):$(a.$els).removeClass(t))}return t.generate("vgraphClassifier",{scope:{classes:"=classes"},preLink:function(t){t.loadPoint=function(t){var e=this.intervalParse(t),n=this.model.getPoint(e);n&&this.valueParse(t,n)}},link:function(t,n,i,a){var r=i.control||"default",o=a[0].graph.views[r];o.register({finalize:function(n,i){var a,r,o,s,l=t.classes,c=Object.keys(l);for(a=0,r=c.length;r>a;a++)o=c[a],s=l[o],e(o,s,i)}})}})}]),angular.module("vgraph").directive("vgraphCompare",["$compile","ComponentGenerator",function(t,e){"use strict";return{require:["^vgraphChart"],scope:{config:"=config"},link:function(t,n,i,a){function r(t){function n(){a&&r&&(o.$d3.attr("visibility","visible"),o.$d3.attr("d",o.calc(s.unified)),a=!1,r=!1)}function i(){o.$d3.attr("visibility","hidden")}var a=!1,r=!1,c=Object.keys(t),h=c[0],u=s.views[t[h]],d=c[1],f=s.views[t[d]];t&&2===c.length&&(o&&o.$d3.remove(),o={$d3:d3.select(l).append("path").attr("class","fill"),calc:e.makeMyFillCalc(u,h,f,d,function(t,e,n,i,a){t.$compare={value:{middle:(e+n)/2,difference:Math.abs(e-n)},position:{middle:(i+a)/2,top:i,bottom:a}}})},u.register({loading:function(){a=!1,i()},error:function(){a=!1,i()},finalize:function(){a=!0,n()}}),f.register({loading:function(){r=!1,i()},error:function(){r=!1,i()},finalize:function(){r=!0,n()}}))}var o,s=a[0].graph,l=n[0];t.$watchCollection("config",r)}}}]),angular.module("vgraph").directive("vgraphFeed",["ComponentGenerator",function(t){"use strict";return t.generate("vgraphFeed",{restrict:"A"})}]),angular.module("vgraph").directive("vgraphFill",["$compile","ComponentGenerator",function(t,e){"use strict";return e.generate("vgraphFill",{scope:{data:"=vgraphFill",fillTo:"=fillTo",value:"=value",interval:"=interval",filter:"=filter"},link:function(n,i,a,r){var o,s=a.control||"default",l=r[0].graph.views[s],c=a.name,h=d3.select(i[0]).append("path").attr("class","fill plot-"+c),u=d3.svg.area().defined(function(t){var e=t[c];return!(isNaN(e)||null===e)}).x(function(t){return l.x.scale(t.$interval)}).y(function(t){return l.y.scale(t[c])}).y1(function(t){var e,i=n.fillTo;return e=l.y.scale(void 0===i?l.pane.y.minimum:"object"==typeof i?n.fillTo.$min:"string"==typeof i?t[i]:i)});"string"==typeof n.fillTo&&(o=e.svgCompile('<g vgraph-feed="data" name="'+n.fillTo+'" value="fillTo" interval="interval" control="'+s+'"></g>')[0],i[0].appendChild(o),t(o)(n)),l.register({parse:function(t,n){return e.parseLimits(n,c)},finalize:function(t,e){h.attr("d",u(e))}})}})}]),angular.module("vgraph").directive("vgraphFocus",[function(){"use strict";return{require:["^vgraphChart"],link:function(t,e,n,i){var a=i[0].graph,r=a.box,o=d3.select(e[0]),s=o.append("rect").attr("class","focus").attr("visibility","hidden");r.register(function(){s.attr("height",r.innerHeight).attr("y",r.innerTop)}),t.$watch("follow",function(t){var e,n,i;t&&void 0!==t.xDiff&&(e=Math.abs(t.xDiff),n=t.x0-e,i=t.x0+e,s.attr("visibility","visible"),n>r.innerLeft?s.attr("x",n):(n=r.innerLeft,s.attr("x",r.innerLeft)),i>r.innerRight?s.attr("width",r.innerRight-n):s.attr("width",i-n))}),t.$watch("stop",function(t){var e,n,i,o,l;t&&(s.attr("visibility","hidden"),e=Math.abs(t.xDiff),e>3&&(n=t.x0-e,i=t.x0+e,n<r.innerLeft?n=0:n-=r.innerLeft,i>r.innerRight?i=r.innerWidth:i-=r.innerLeft,o=a.getPrimaryView().pane.offset,l=r.innerWidth*o.right-r.innerWidth*o.left,a.setPane({start:"%"+(r.innerWidth*o.left+n/r.innerWidth*l)/r.innerWidth,stop:"%"+(r.innerWidth*o.right-(r.innerWidth-i)/r.innerWidth*l)/r.innerWidth},{start:null,stop:null}),a.rerender()))})},scope:{follow:"=vgraphFocus",stop:"=loseFocus"}}}]),angular.module("vgraph").directive("vgraphIcon",["ComponentGenerator",function(t){"use strict";return t.generate("vgraphIcon",{scope:{getValue:"=trueValue"},link:function(e,n,i,a){var r,o,s,l=i.control||"default",c=a[0].graph.views[l],h=n[0],u=i.name,d=[],f=d3.select(h),p=f.node().getBBox();for(void 0===i.value&&(e.value=u),r=0,o=h.childNodes.length;o>r;r++)1===h.childNodes[r].nodeType&&d.push(h.childNodes[r]);n.html(""),c.register({parse:function(e,n){return s=[],t.parseLimits(n,u,function(t,e){e&&s.push(t)})},build:function(){function t(){return this.appendChild(d[o].cloneNode(!0))}var a,r,o,l;n.html(""),angular.forEach(s,function(n){var s;for(a=n.$sampled._$interval,r=c.y.scale(e.getValue(n.$sampled)),s=f.append("g"),o=0,l=d.length;l>o;o++)s.select(t);i.showUnder?s.attr("transform","translate("+(a-p.width/2)+","+r+")"):s.attr("transform","translate("+(a-p.width/2)+","+(r-p.height)+")")})}})}})}]),angular.module("vgraph").directive("vgraphIndicator",[function(){"use strict";return{require:["^vgraphChart"],scope:{model:"=model"},link:function(t,e,n,i){function a(){d.attr("visibility","hidden")}var r,o=n.control||"default",s=i[0].graph.views[o],l=n.vgraphIndicator,c=s.model,h=t.$eval(n.pointRadius)||3,u=t.$eval(n.outerRadius),d=d3.select(e[0]).attr("transform","translate(1000,1000)"),f=d.append("circle").attr("class","point inner").attr("r",h).attr("visibility","hidden"),p=d.append("circle").attr("class","point outer").attr("r",h).attr("visibility","hidden");u&&(r=function(){p.transition().duration(1e3).attr("r",u).transition().duration(1e3).attr("r",h).ease("sine").each("end",function(){setTimeout(function(){r()},3e3)})})(),s.register({error:a,loading:a,finalize:function(t){var e,n,i;c.plots[l]?(e=c.plots[l].x.max,t.isValid(e)&&e[l]?(n=s.x.scale(e.$interval),i=s.y.scale(e["$"+l]||e[l]),f.attr("visibility","visible"),p&&p.attr("visibility","visible"),d.transition().duration(c.transitionDuration).ease("linear").attr("transform","translate("+n+","+i+")")):(f.attr("visibility","hidden"),p&&p.attr("visibility","hidden"))):(f.attr("visibility","hidden"),p&&p.attr("visibility","hidden"))}})}}}]),angular.module("vgraph").directive("vgraphInteract",[function(){"use strict";return{require:["^vgraphChart"],scope:{highlight:"=vgraphInteract",dragStart:"=?dBegin",dragPos:"=?dChange",dragStop:"=?dEnd"},link:function(t,e,n,i){function a(e,n,i,a){clearTimeout(s),t.$apply(function(){var r=d3.mouse(e);angular.forEach(t.highlight.point,function(t){$(t.$els).removeClass("active")}),t.highlight.offset=n,t.highlight.point=i,t.highlight.closest=a,t.highlight.position={x:r[0],y:r[1]},angular.forEach(t.highlight.point,function(t){$(t.$els).addClass("active")})})}function r(){s=setTimeout(function(){t.$apply(function(){angular.forEach(t.highlight.point,function(t){$(t.$els).removeClass("active")}),t.highlight.point=null,t.highlight.closest=null,t.highlight.offset=null})},100)}var o,s,l=i[0].graph,c=!1,h=l.box,u=d3.select(e[0]),d=u.append("rect").style("opacity","0").attr("class","focal").on("mousemove",function(){var t,e={},n=d3.mouse(this)[0];c||(t=Object.keys(l.views),t.forEach(function(t){var i=l.views[t],a=i.x.scale.invert(n);e[t]=i.getSampledClosest(a)}),a(this,n,l.unified.getClosest(n),e))}).on("mouseout",function(t){c||r(this,t)});u.attr("class","interactive"),u.call(d3.behavior.drag().on("dragstart",function(){o=d3.mouse(e[0]),c=!0,r(),t.dragStart={x:o[0],y:o[1]},t.$apply()}).on("dragend",function(){var n=d3.mouse(e[0]);c=!1,t.dragStop={x0:o[0],y0:o[1],x1:n[0],x2:n[1],xDiff:n[0]-o[0],yDiff:n[1]-o[1]},t.$apply()}).on("drag",function(){var n=d3.mouse(e[0]);t.dragPos={x0:o[0],y0:o[1],x1:n[0],x2:n[1],xDiff:n[0]-o[0],yDiff:n[1]-o[1]},t.$apply()})),u.on("dblclick",function(){l.setPane({start:null,stop:null},{start:null,stop:null}),l.rerender()}),angular.forEach(l.views,function(t){t.register({finalize:function(){d.attr({x:h.innerLeft,y:h.innerTop,width:h.innerWidth,height:h.innerHeight})}})}),t.highlight||(t.highlight={}),t.dragStart||(t.dragStart={}),t.dragPos||(t.dragPos={}),t.dragStop||(t.dragStop={})}}}]),angular.module("vgraph").directive("vgraphLeading",[function(){"use strict";return{require:["^vgraphChart"],scope:{config:"=config"},link:function(t,e,n,i){function a(t){var e,n,i;if(o={},h.selectAll("line").remove(),t)for(n=0,i=t.length;i>n;n++)e=t[n],o[e.name]=h.append("line").attr("class",e.className)}function r(){h.attr("visibility","hidden")}var o,s=n.control||"default",l=i[0].graph,c=l.views[s],h=d3.select(e[0]);t.$watchCollection("config",a),c.register({error:r,loading:r,finalize:function(t){var e,n,i=c.model,a=[];angular.forEach(o,function(n,r){i.plots[r]&&(e=i.plots[r].x.max,t.isValid(e)&&e[r]&&a.push({el:n,x:c.x.scale(e.$interval),y:c.y.scale(e["$"+r]||e[r])}))}),a.sort(function(t,e){return t.y-e.y}),angular.forEach(a,function(t){n&&n.el.attr("x1",n.x).attr("x2",t.x).attr("y1",n.y).attr("y2",t.y),n=t}),n?(h.attr("visibility","visible"),n.el.attr("x1",n.x).attr("x2",n.x).attr("y1",n.y).attr("y2",l.box.innerBottom)):h.attr("visibility","hidden")}})}}}]),angular.module("vgraph").directive("vgraphLine",["ComponentGenerator",function(t){"use strict";return t.generate("vgraphLine",{link:function(e,n,i,a){var r=i.control||"default",o=a[0].graph.views[r],s=i.name,l=d3.select(n[0]).append("path").attr("class","line plot-"+s),c=t.makeLineCalc(o,s);o.register({parse:function(e){return t.parseLimits(e,s)},finalize:function(t,e){var n;l.attr("d",c(e.filter(function(t,i){var a,r=n;return n=t[s],r!==n?!0:(a=e[i+1],!a||a[s]!==n)})))},publish:function(e,n,i,a){n.push(s),t.publish(e,s,i,a)}})}})}]),angular.module("vgraph").directive("vgraphLoading",["$interval",function(t){"use strict";return{require:["^vgraphChart"],link:function(e,n,i,a){function r(){!f&&d.loading&&(m.attr("visibility","visible"),f=!0,t.cancel(l),s(),l=t(s,4005))}function o(){m.attr("visibility","hidden"),f=!1,t.cancel(l)}function s(){x.attr("x",function(){return c}).attr("width",function(){return 0}).transition().duration(1e3).attr("x",function(){return c}).attr("width",function(){return h}).ease("sine").transition().duration(1e3).attr("width",0).attr("x",function(){return u}).ease("sine").transition().duration(1e3).attr("width",function(){return h}).attr("x",function(){return c}).ease("sine").transition().duration(1e3).attr("x",function(){return c}).attr("width",0).ease("sine")}var l,c,h,u,d=a[0].graph,f=!1,p=d.box,g=i.vgraphLoading||"Loading Data",m=d3.select(n[0]).attr("class","loading-view"),v=m.append("rect").attr("height",20).attr("class","outline"),x=m.append("rect").attr("width",0).attr("height",20).attr("class","filling"),y=m.append("text").text(g);p.register(function(){if(c=p.innerLeft+p.innerWidth/5,h=3*p.innerWidth/5,u=c+h,h){x.attr("x",c).attr("y",p.middle-10),v.attr("x",c).attr("y",p.middle-10).attr("width",h);try{y.attr("text-anchor","middle").attr("x",p.center).attr("y",p.middle+y.node().getBBox().height/2-2)}catch(t){y.attr("text-anchor","middle").attr("x",p.center).attr("y",p.middle)}r()}else o()}),e.$on("$destroy",function(){o()}),e.$watch(function(){return d.loading},function(t){o(),t&&p.ratio&&r()})}}}]),angular.module("vgraph").directive("vgraphMessage",[function(){"use strict";return{require:["^vgraphChart"],link:function(t,e,n,i){var a=i[0].graph,r=a.box,o=d3.select(e[0]).attr("class","error-view"),s=o.append("rect").attr("class","outline"),l=o.append("text");r.register(function(){if(r.innerHeight){s.attr("transform","translate("+r.innerLeft+","+r.innerTop+")").attr("width",r.innerWidth).attr("height",r.innerHeight);try{l.attr("text-anchor","middle").attr("x",r.center).attr("y",r.middle+l.node().getBBox().height/2)}catch(t){l.attr("text-anchor","middle").attr("x",r.center).attr("y",r.middle)}}}),t.$watch(function(){return a.message},function(t){t&&!a.loading?(o.attr("visibility","visible"),l.text(t)):o.attr("visibility","hidden")})}}}]),angular.module("vgraph").directive("vgraphMultiIndicator",["$compile",function(t){"use strict";return{scope:{config:"=config"},link:function(e,n,i){function a(n){var a,s,l,c,h,u,d,f,p=e.$eval(i.pointRadius)||3,g=e.$eval(i.outerRadius),m="";if(n){for(d3.select(o).selectAll("g").remove();r.length;)r.pop().$destroy();for(l=0,c=n.length;c>l;l++)f=n[l],d=f.name,h=f.className?f.className:"plot-"+d,m+='<g class="'+h+'" vgraph-indicator="'+d+'"'+(g?' outer-radius="'+g+'"':"")+' point-radius="'+p+'"></g>';for(u=(new DOMParser).parseFromString('<g xmlns="http://www.w3.org/2000/svg">'+m+"</g>","image/svg+xml").childNodes[0].childNodes;u.length;)s=u[0],o.appendChild(s),a=e.$new(),r.push(a),t(s)(a)}}var r=[],o=n[0];e.$watchCollection("config",a)}}}]),angular.module("vgraph").directive("vgraphMultiLine",["$compile","ComponentGenerator",function(t,e){"use strict";var n=0;return{require:["^vgraphChart"],scope:{data:"=vgraphMultiLine",config:"=config"},link:function(i,a,r,o){function s(n){var a,r,o,s,h,f;if(c=[],n){for(d3.select(m).selectAll("path").remove();g.length;)g.pop().$destroy();for(h=e.compileConfig(i,n,"line"),p={},r=0,o=h.length;o>r;r++)f=h[r],s=d.views[f.$conf.control||u],p[s.name]||(p[s.name]=[],l(s)),p[s.name].push(f),m.appendChild(f.element),f.calc=e.makeLineCalc(s,f.name),a=i.$new(),g.push(a),t(f.element)(a)}}function l(t){f[t.name]||(f[t.name]=t,t.register({parse:function(n){var i,a,r=[],o=p[t.name];if(o)for(i=0,a=o.length;a>i;i++)r.push(o[i].name);return e.parseLimits(n,r)},finalize:function(e,n){var i,a,r,o=p[t.name];if(o)for(i=0,a=o.length;a>i;i++)r=o[i],r.$d3.attr("d",r.calc(n))}}))}var c,h,u=r.control||"default",d=o[0].graph,f={},p={},g=[],m=a[0],v=n++;m.$id=v,h=i.$watchCollection("config",s),i.$on("$destroy",function(){for(;g.length;)g.pop().$destroy();h()})}}}]),angular.module("vgraph").directive("vgraphMultiTooltip",["$compile",function(t){"use strict";return{scope:{config:"=config",formatter:"=textFormatter",data:"=vgraphMultiTooltip"},link:function(e,n,i){function a(n){var a,s,l,c,h,u,d,f,p="";if(n){for(d3.select(o).selectAll("g").remove();r.length;)r.pop().$destroy();for(l=0,c=n.length;c>l;l++)f=n[l],d=f.name,h=f.className?f.className:"plot-"+d,p+='<g class="'+h+'" vgraph-tooltip="data" name="'+d+'" text-formatter="formatter"'+(i.offseX?' offset-x="'+i.offsetX+'"':"")+(i.offseY?' offset-y="'+i.offsetY+'"':"")+"></g>";for(u=(new DOMParser).parseFromString('<g xmlns="http://www.w3.org/2000/svg">'+p+"</g>","image/svg+xml").childNodes[0].childNodes;u.length;)s=u[0],o.appendChild(s),a=e.$new(),r.push(a),t(s)(a)}}var r=[],o=n[0];e.$watchCollection("config",a)}}}]),angular.module("vgraph").directive("vgraphStack",["$compile","ComponentGenerator",function(t,e){"use strict";return{require:["^vgraphChart"],scope:{config:"=config"},link:function(n,i,a,r){function o(i){var a,r,o,l;if(i){for(d3.select(d).selectAll("path").remove(),s=e.compileConfig(n,i,"fill");u.length;)u.pop().$destroy();for(r=0,o=s.length;o>r;r++)l=s[r],l.$valueField="$"+l.name,r?(d.insertBefore(l.element,s[r-1].element),l.$bottom=s[r-1].$valueField,l.calc=e.makeMyFillCalc(h,l.$valueField,h,l.$bottom)):(d.appendChild(l.element),l.calc=e.makeMyFillCalc(h,l.$valueField)),a=n.$new(),u.push(a),t(l.element)(a)}}var s,l=a.control||"default",c=r[0].graph,h=c.views[l],u=[],d=i[0];n.$watchCollection("config",o),h.register({parse:function(t){return e.parseStackedLimits(t,s)},finalize:function(){var t,e,n;for(t=0,e=s.length;e>t;t++)n=s[t],n.$d3.attr("d",n.calc(c.unified))}})}}}]),angular.module("vgraph").directive("vgraphTarget",[function(){"use strict";return{require:["^vgraphChart"],scope:{pointRadius:"=pointRadius",target:"=vgraphTarget",config:"=?config"},link:function(t,e,n,i){function a(t){var e,n,i={};if(t)for(e=0,n=t.length;n>e;e++)t[e]&&(i[t[e].name]=t[e].className);return i}function r(t){o=t,t?(h.style("visibility","visible").attr("transform","translate("+t+",0)"),angular.forEach(p,function(t){t&&t()})):h.style("visibility","hidden")}var o,s,l=i[0].graph,c=l.box,h=d3.select(e[0]).attr("class","target"),u=h.append("line").attr("class","focus").attr("x1",0).attr("x2",0),d=h.append("g"),f=n.type||"point",p={};n.offset?t.$watch("target.offset",r):t.$watch("target.point.$index",function(t){r(t)}),t.$watchCollection(function(){var e=n.control;try{e=t.$eval(n.control),angular.isString(e)&&(e=[e])}catch(i){}return e||(e=n.control?[n.control]:Object.keys(l.views)),e},function(e){angular.forEach(s,function(t){t()}),s=[],angular.forEach(e,function(e){var i,r=l.views[e],c=r.model;i=t.$watch('config["'+e+'"]',function(i){var s=a(i);p[e]=function(){var i,a,l=t.target[f][e];if(s&&l&&void 0===n.noDots){d.selectAll("circle.point."+e).remove();for(i in c.plots)l[i]&&(a=s[i]||"plot-"+i,d.append("circle").attr("class","point "+a+" "+e).attr("cx",n.offset?l._$interval-o:0).attr("cy",r.y.scale(l[i])).attr("r",t.$eval(n.pointRadius)||3))}else d.selectAll("circle.point."+e).remove()}}),s.push(function(){i(),p[e]=null})})}),c.register(function(){u.attr("y1",c.innerTop).attr("y2",c.innerBottom)})}}}]),angular.module("vgraph").directive("vgraphTooltip",[function(){"use strict";return{require:["^vgraphChart"],scope:{formatter:"=textFormatter",data:"=vgraphTooltip",value:"=?value",position:"=?yValue"},link:function(t,e,n,i){var a=n.control||"default",r=i[0].graph,o=r.views[a],s=n.name,l=t.formatter||function(t){var e=o.model;return e.y.format(e.y.parse(t))},c=parseInt(n.offsetX)||0,h=parseInt(n.offsetY)||0,u=d3.select(e[0]).attr("class","tooltip"),d=u.append("polygon").attr("class","outline").attr("transform","translate(0,-15)"),f=u.append("text").style("line-height","20").style("font-size","16").attr("class","label");t.$watch("data.point",function(e){var n,i,p,g,m;e&&(n=e[a],i=t.value?t.value(e):n[s],void 0!==i&&(p=t.position?t.position(e):o.y.scale(i),g=e.$index+c,f.text(l(i,n,e)),m=f.node().getComputedTextLength()+5,u.style("visibility","visible"),g+m+16<r.box.innerRight?(u.attr("transform","translate("+g+","+(p+h)+")"),f.attr("transform","translate(10,5)"),d.attr("points","0,15 10,0 "+(m+10)+",0 "+(m+10)+",30 10,30 0,15")):(u.attr("transform","translate("+(g-2*c-m-10)+","+(p+h)+")"),f.attr("transform","translate(5,5)"),d.attr("points","0,0 "+m+",0 "+(m+10)+",15 "+m+",30 0,30 0,0")))),void 0===i&&u.style("visibility","hidden")})}}}]),angular.module("vgraph").directive("vgraphZone",["ComponentGenerator",function(t){"use strict";return t.generate("vgraphZone",{link:function(t,e,n,i){var a=n.control||"default",r=i[0].graph,o=r.views[a],s=r.box,l=n.name,c=d3.select(e[0]).append("path").attr("class","line plot-"+l),h=d3.svg.area().defined(function(t){return t[l]===!0}).x(function(t){return o.x.scale(t.$interval)}).y(function(){return s.innerTop}).y1(function(){return s.innerBottom});o.register({finalize:function(t,e){c.attr("d",h(e))}})}})}]),angular.module("vgraph").directive("vgraphZoom",[function(){"use strict";return{scope:{target:"=vgraphZoom",min:"=zoomMin",max:"=zoomMax"},require:["^vgraphChart"],link:function(t,e,n,i){function a(e){0===o&&s===f.innerWidth?(m=!1,b.attr("class","focus")):(m=!0,b.attr("class","focus zoomed")),0>o&&(o=0),s>f.innerWidth&&(s=f.innerWidth),o>s?o=s:o>s&&(s=o),x.attr("transform","translate("+o+",0)"),y.attr("transform","translate(-"+o+",0 )").attr("width",o),w.attr("transform","translate("+s+",0)"),k.attr("width",f.innerWidth-s),b.attr("transform","translate("+o+",0)").attr("width",s-o),e||t.$apply(function(){p.setPane({start:"%"+o/f.innerWidth,stop:"%"+s/f.innerWidth},{start:null,stop:null}),p.rerender()})}var r,o,s,l,c,h,u,d=i[0].graph,f=d.box,p=t.target,g=!1,m=!1,v=d3.select(e[0]),x=v.append("g").attr("class","left-control min-control"),y=x.append("rect").attr("class","shade"),$=x.append("g").attr("class","control"),b=v.append("rect").attr("class","focus"),w=v.append("g").attr("class","right-control max-control"),k=w.append("rect").attr("class","shade"),C=w.append("g").attr("class","control");c=$.append("path").attr("d","M-0.5,23.33A6,6 0 0 0 -6.5,29.33V40.66A6,6 0 0 0 -0.5,46.66ZM-2.5,31.33V38.66M-4.5,31.33V38.66").attr("transform","translate(0,-9)").attr("class","nub"),l=$.append("rect").attr("width","10").attr("transform","translate(-10,0)"),u=C.append("path").attr("d","M0.5,23.33A6,6 0 0 1 6.5,29.33V40.66A6,6 0 0 1 0.5,46.66ZM2.5,31.33V38.66M4.5,31.33V38.66").attr("transform","translate(0,-9)").attr("class","nub"),h=C.append("rect").attr("width","10"),t.box=f,l.call(d3.behavior.drag().on("dragstart",function(){g=!0}).on("dragend",function(){g=!1}).on("drag",function(){o=d3.mouse(e[0])[0],a()})),h.call(d3.behavior.drag().on("dragstart",function(){g=!0}).on("dragend",function(){g=!1}).on("drag",function(){s=d3.mouse(e[0])[0],a()})),b.call(d3.behavior.drag().on("dragstart",function(){r={mouse:d3.mouse(e[0])[0],minPos:o,maxPos:s},g=!0}).on("dragend",function(){g=!1,m=!0}).on("drag",function(){var t=d3.mouse(e[0]),n=t[0]-r.mouse;m?(s=r.maxPos+n,o=r.minPos+n,a()):n>1&&(s=r.mouse+Math.abs(n),o=r.mouse-Math.abs(n),a(),m=!1)})),v.on("dblclick",function(){s=f.innerWidth,o=0,a()}),f.register(function(){v.attr("width",f.innerWidth).attr("height",f.innerHeight).attr("transform","translate("+f.innerLeft+","+f.innerTop+")"),u.attr("transform","translate(0,"+(f.innerHeight/2-30)+")"),c.attr("transform","translate(0,"+(f.innerHeight/2-30)+")"),y.attr("height",f.innerHeight),k.attr("height",f.innerHeight),l.attr("height",f.innerHeight),h.attr("height",f.innerHeight),b.attr("height",f.innerHeight)}),p.register(function(t){g||(t.offset?(o=t.offset.left*f.innerWidth,s=t.offset.right*f.innerWidth):(o=0,s=f.innerWidth),a(!0))})}}}]),function(t){"use strict";var e=/\S+/g,n=/[\t\r\n\f]/g;t&&(t.fn.addClass=function(i){var a,r,o,s,l,c,h,u="string"==typeof i&&i,d=0,f=this.length;if(t.isFunction(i))return this.each(function(e){t(this).addClass(i.call(this,e,this.className))});if(u)for(a=(i||"").match(e)||[];f>d;d++)if(r=this[d],h="string"!=typeof r.className,o=1===r.nodeType&&(r.className?(" "+(h?r.getAttribute("class")||"":r.className)+" ").replace(n," "):" ")){for(l=0;s=a[l++];)o.indexOf(" "+s+" ")<0&&(o+=s+" ");c=t.trim(o),r.className!==c&&(h?r.setAttribute("class",c):r.className=c)}return this},t.fn.removeClass=function(i){var a,r,o,s,l,c,h,u=0===arguments.length||"string"==typeof i&&i,d=0,f=this.length;if(t.isFunction(i))return this.each(function(e){t(this).removeClass(i.call(this,e,this.className))});if(u)for(a=(i||"").match(e)||[];f>d;d++)if(r=this[d],h="string"!=typeof r.className,o=1===r.nodeType&&(r.className?(" "+(h?r.getAttribute("class")||"":r.className)+" ").replace(n," "):"")){for(l=0;s=a[l++];)for(;o.indexOf(" "+s+" ")>=0;)o=o.replace(" "+s+" "," ");c=i?t.trim(o):"",r.className!==c&&(h?r.setAttribute("class",c):r.className=c)}return this})}(jQuery);
//# sourceMappingURL=vgraph.min.js.map